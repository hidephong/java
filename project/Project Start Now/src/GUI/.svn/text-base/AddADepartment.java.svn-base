/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * AddADepartment.java
 *
 * Created on Mar 27, 2011, 3:09:35 PM
 */

package GUI;

import DataAccess.DepartmentData;
import Entity.Department;
import java.awt.Dimension;
import java.awt.Toolkit;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JOptionPane;

/**
 *
 * @author Nha.HV
 */
public class AddADepartment extends javax.swing.JDialog {
    DefaultComboBoxModel    cbbmd;
    DepartmentData          deptdata;
    Department              dept;
    /** Creates new form AddADepartment */
    public AddADepartment(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
        deptdata = new DepartmentData();
        init();
    }

   private void init(){
       jtfName.setText(null);
       jcbbLocationName.setModel(new DepartmentGUI().getCbbmdl());
       
        Dimension dimension = Toolkit.getDefaultToolkit().getScreenSize();
        int x = (int) ((dimension.getWidth() - getWidth())/2);
        int y = (int) ((dimension.getHeight() - getHeight())/2);
        setLocation(x,y);
    
   }
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        glossPainter1 = new org.jdesktop.swingx.painter.GlossPainter();
        jXHeader1 = new org.jdesktop.swingx.JXHeader();
        jPanel2 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jtfName = new javax.swing.JTextField();
        jcbbLocationName = new javax.swing.JComboBox();
        jcbStatus = new javax.swing.JCheckBox();
        jLabel3 = new javax.swing.JLabel();
        jbtCancel = new javax.swing.JButton();
        jbtSave = new javax.swing.JButton();
        jntReset = new javax.swing.JButton();
        jlbMessage = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Add a department");

        jXHeader1.setBackground(new java.awt.Color(0, 102, 102));
        jXHeader1.setBackgroundPainter(glossPainter1);
        jXHeader1.setFont(new java.awt.Font("Tahoma", 0, 18));
        jXHeader1.setPreferredSize(new java.awt.Dimension(400, 46));
        jXHeader1.setRequestFocusEnabled(false);
        jXHeader1.setScrollableTracksViewportHeight(false);
        jXHeader1.setScrollableTracksViewportWidth(false);
        jXHeader1.setTitle("Add a Department");
        jXHeader1.setTitleForeground(new java.awt.Color(255, 255, 255));

        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "New Department", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 12))); // NOI18N
        jPanel2.setPreferredSize(new java.awt.Dimension(300, 200));

        jLabel1.setText("Department Name:");

        jLabel2.setText("Curent Location: ");

        jtfName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jtfNameActionPerformed(evt);
            }
        });

        jcbbLocationName.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));
        jcbbLocationName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jcbbLocationNameActionPerformed(evt);
            }
        });

        jcbStatus.setText("Enable");

        jLabel3.setText("Status:");

        jbtCancel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/Icons_24/dialog-error.png"))); // NOI18N
        jbtCancel.setText("Cancel");
        jbtCancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtCancelActionPerformed(evt);
            }
        });

        jbtSave.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/Icons_24/gnome-dev-zipdisk.png"))); // NOI18N
        jbtSave.setText("Save");
        jbtSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtSaveActionPerformed(evt);
            }
        });

        jntReset.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/Icons_24/gnome-session-reboot.png"))); // NOI18N
        jntReset.setText("Reset");
        jntReset.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jntResetActionPerformed(evt);
            }
        });

        jlbMessage.setText("Message: ");

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel1)
                            .addComponent(jLabel3)
                            .addComponent(jLabel2))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jcbbLocationName, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jtfName, javax.swing.GroupLayout.DEFAULT_SIZE, 231, Short.MAX_VALUE)
                            .addComponent(jcbStatus)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                        .addComponent(jbtCancel)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jntReset)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jbtSave))
                    .addComponent(jlbMessage))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(11, 11, 11)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(jtfName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jcbbLocationName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jcbStatus)
                    .addComponent(jLabel3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jlbMessage)
                .addGap(13, 13, 13)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jbtSave, javax.swing.GroupLayout.PREFERRED_SIZE, 18, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jntReset, javax.swing.GroupLayout.PREFERRED_SIZE, 21, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jbtCancel, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jPanel2Layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {jbtCancel, jbtSave, jntReset});

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jXHeader1, javax.swing.GroupLayout.DEFAULT_SIZE, 384, Short.MAX_VALUE)
            .addGroup(layout.createSequentialGroup()
                .addGap(10, 10, 10)
                .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, 364, Short.MAX_VALUE)
                .addGap(10, 10, 10))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jXHeader1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, 194, Short.MAX_VALUE)
                .addContainerGap())
        );

        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        setBounds((screenSize.width-400)/2, (screenSize.height-295)/2, 400, 295);
    }// </editor-fold>//GEN-END:initComponents

    private void jtfNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jtfNameActionPerformed
        // TODO remove this action

}//GEN-LAST:event_jtfNameActionPerformed

    private void jbtCancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtCancelActionPerformed
        this.dispose();
        
}//GEN-LAST:event_jbtCancelActionPerformed

    private void jbtSaveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtSaveActionPerformed
       if(jtfName.getText().isEmpty()) {
           jlbMessage.setText("Error! The Department Name cannot be empty.");
           jtfName.requestFocus(true);
           return;
       }
       if(jcbbLocationName.getSelectedIndex() == -1){
           jlbMessage.setText("Error! The Location Name cannot be empty.");
           jcbbLocationName.requestFocus(true);
           return;
       }
       if(!jcbStatus.isSelected()){
           if(JOptionPane.showConfirmDialog(this, "Do you want enabled this department now?", "Confirm!", JOptionPane.YES_NO_OPTION)==0){
               jcbStatus.setSelected(true);
           }else{
               jcbStatus.setSelected(false);
           }
       }
       dept = new Department();
       dept.setDepartmentName(jtfName.getText());
       dept.setLocationAddress(jcbbLocationName.getSelectedItem().toString());
       dept.setBooleanStatus(jcbStatus.isSelected());
       
       boolean saved = deptdata.addADepartment(dept);
       if(saved){
           JOptionPane.showMessageDialog(this, "Add a department Successful.");
           this.dispose();
           
       }else{
           jlbMessage.setText("Adding Failed");
       }
       
       
    }//GEN-LAST:event_jbtSaveActionPerformed

    private void jcbbLocationNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jcbbLocationNameActionPerformed
        // TODO remove this action

    }//GEN-LAST:event_jcbbLocationNameActionPerformed

    private void jntResetActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jntResetActionPerformed
        init();
    }//GEN-LAST:event_jntResetActionPerformed

    /**
    * @param args the command line arguments
    */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                AddADepartment dialog = new AddADepartment(new javax.swing.JFrame(), true);
                dialog.addWindowListener(new java.awt.event.WindowAdapter() {
                    public void windowClosing(java.awt.event.WindowEvent e) {
                        System.exit(0);
                    }
                });
                dialog.setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private org.jdesktop.swingx.painter.GlossPainter glossPainter1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JPanel jPanel2;
    private org.jdesktop.swingx.JXHeader jXHeader1;
    private javax.swing.JButton jbtCancel;
    private javax.swing.JButton jbtSave;
    private javax.swing.JCheckBox jcbStatus;
    private javax.swing.JComboBox jcbbLocationName;
    private javax.swing.JLabel jlbMessage;
    private javax.swing.JButton jntReset;
    private javax.swing.JTextField jtfName;
    // End of variables declaration//GEN-END:variables
    int i  = 0;
}
