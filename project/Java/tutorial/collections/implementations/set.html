
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Set Implementations (The Java&trade; Tutorials &gt; 
            Collections &gt; Implementations)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Collections
        <br><b>Lesson:</b> Implementations
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Implementations</a></div>
<div class="nolinkAHEAD">Set Implementations</div>
<div class="linkAHEAD"><a href="list.html">List Implementations</a></div>
<div class="linkAHEAD"><a href="map.html">Map Implementations</a></div>
<div class="linkAHEAD"><a href="queue.html">Queue Implementations</a></div>
<div class="linkAHEAD"><a href="wrapper.html">Wrapper Implementations</a></div>
<div class="linkAHEAD"><a href="convenience.html">Convenience Implementations</a></div>
<div class="linkAHEAD"><a href="summary.html">Summary of Implementations</a></div>
<div class="linkQUESTIONS"><a href="QandE/questions.html">Questions and Exercises</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Collections</a>
                &gt;
                <a href=index.html target=_top>Implementations</a>
            </span>
            <div class=NavBit>
                <a target=_top href=index.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=list.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>Set Implementations</div>
            <blockquote>
The <code>Set</code> implementations are grouped into general-purpose
and special-purpose implementations.

<h3 fmstyle=C-Head>General-Purpose Set Implementations</h3>

There are three general-purpose
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/Set.html"><code>Set</code></a> implementations &mdash;

<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/HashSet.html"><code>HashSet</code></a>,
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/TreeSet.html"><code>TreeSet</code></a>, and

<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/LinkedHashSet.html"><code>LinkedHashSet</code></a>.

Which of these three to use is generally straightforward.
<code>HashSet</code> is much faster than <code>TreeSet</code> (constant-time versus log-time for most operations) but offers no ordering guarantees.
If you need to use the operations in the <code>SortedSet</code> interface,
or if value-ordered iteration is required, use <code>TreeSet</code>;
otherwise, use <code>HashSet</code>. It's a fair bet that you'll end up
using <code>HashSet</code> most of the time.

<p>

<code>LinkedHashSet</code> is in some sense intermediate between
<code>HashSet</code> and <code>TreeSet</code>. Implemented as a hash
table with a linked list running through it, it provides
<em>insertion-ordered</em> iteration (least recently inserted to
most recently) and runs nearly as fast as <code>HashSet</code>.
The <code>LinkedHashSet</code> implementation spares its clients from the
unspecified, generally chaotic ordering provided by <code>HashSet</code>
without incurring the increased cost associated with <code>TreeSet</code>.

<p>

One thing worth keeping in mind about <code>HashSet</code> is that
iteration is linear in the sum of the number of entries and the
number of buckets (the <em>capacity</em>). Thus, choosing an
initial capacity that's too high can waste both space and time.
On the other hand, choosing an initial capacity that's too low
wastes time by copying the data structure each time it's forced
to increase its capacity. If you don't specify an initial capacity,
the default is 16. In the past, there was some advantage to choosing
a prime number as the initial capacity. This is no longer true.
Internally, the capacity is always rounded up to a power of two.
The initial capacity is specified by using the <code>int</code> constructor.
The following line of code allocates a <code>HashSet</code> whose initial capacity is 64.

<blockquote><pre>
Set&lt;String&gt; s = new HashSet&lt;String&gt;(64);
</pre></blockquote>

The <code>HashSet</code> class has one other tuning parameter
called the <em>load factor</em>. If you care a lot about the space
consumption of your <code>HashSet</code>, read the <code>HashSet</code>
documentation for more information. Otherwise, just accept the default;
it's almost always the right thing to do.

<p>

If you accept the default load factor but want to specify an initial
capacity, pick a number that's about twice the size to which you expect
the set to grow. If your guess is way off, you may waste a bit of space,
time, or both, but it's unlikely to be a big problem.

<p>

<code>LinkedHashSet</code> has the same tuning parameters as <code>HashSet</code>,
but iteration time is not affected by capacity. <code>TreeSet</code>
has no tuning parameters.

<h3 fmstyle=C-Head>Special-Purpose Set Implementations</h3>

There are two special-purpose <code>Set</code> implementations &mdash;

<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/EnumSet.html"><code>EnumSet</code></a>
and

<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArraySet.html"><code>CopyOnWriteArraySet</code></a>.

<p>

<code>EnumSet</code> is a high-performance <code>Set</code>
implementation for enum types. All of the members of an enum set must
be of the same enum type.  Internally, it is represented by a
bit-vector, typically a single <code>long</code>.  Enum sets support
iteration over ranges of enum types.  For example, given the enum
declaration for the days of the week, you can iterate over the
weekdays. The <code>EnumSet</code> class provides a static factory
that makes it easy.

<blockquote><pre>
    for (Day d : EnumSet.range(Day.MONDAY, Day.FRIDAY))
        System.out.println(d);
</pre></blockquote>

Enum sets also provide a rich, typesafe replacement for traditional bit flags.

<blockquote><pre>
    EnumSet.of(Style.BOLD, Style.ITALIC)
</pre></blockquote>

<code>CopyOnWriteArraySet</code> is a <code>Set</code> implementation backed up by a
copy-on-write array. All mutative operations, such as <code>add</code>,
<code>set</code>, and <code>remove</code>, are implemented by making a new copy
of the array; no locking is ever required. Even iteration may safely proceed
concurrently with element insertion and deletion. Unlike most <code>Set</code>
implementations, the <code>add</code>, <code>remove</code>, and <code>contains</code>
methods require time proportional to the size of the set. This implementation
is <em>only</em> appropriate for sets that are rarely modified but frequently
iterated. It is well suited to maintaining event-handler lists that
must prevent duplicates.
        </blockquote>
        <div class=NavBit>
            <a target=_top href=index.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=list.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Implementations
        <br><b>Next page:</b> List Implementations
    </div>
    </body>
</html> 
