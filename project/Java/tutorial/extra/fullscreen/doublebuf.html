<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Double Buffering and Page Flipping (The Java&trade; Tutorials &gt; 
            Bonus &gt; Full-Screen Exclusive Mode API)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Bonus
        <br><b>Lesson:</b> Full-Screen Exclusive Mode API
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Full-Screen Exclusive Mode API</a></div>
<div class="linkAHEAD"><a href="exclusivemode.html">Full-Screen Exclusive Mode</a></div>
<div class="linkAHEAD"><a href="displaymode.html">Display Mode</a></div>
<div class="linkAHEAD"><a href="rendering.html">Passive vs. Active Rendering</a></div>
<div class="nolinkAHEAD">Double Buffering and Page Flipping</div>
<div class="linkAHEAD"><a href="bufferstrategy.html"><code>BufferStrategy</code> and <code>BufferCapabilities</code></a></div>
<div class="linkAHEAD"><a href="example.html">Examples</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Bonus</a>
                &gt;
                <a href=index.html target=_top>Full-Screen Exclusive Mode API</a>
            </span>
            <div class=NavBit>
                <a target=_top href=rendering.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=bufferstrategy.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>Double Buffering and Page Flipping</div>
            <blockquote>
<!--Double Buffering and Page Flipping-->


Suppose you had to draw an entire picture on the screen, pixel by pixel
or line by line. If you were to draw such a thing directly to the
screen (using, say, <tt>Graphics.drawLine</tt>), you would probably notice
with much disappointment that it takes a bit of time. You will probably
even notice visible artifacts of how your picture is drawn. Rather
than watching things being drawn in this fashion and at this pace, most
programmers use a technique called <i>double-buffering</i>.

<p>The traditional notion of double-buffering in Java applications is fairly
straightforward: create an offscreen image, draw to that image using the
image's graphics object, then, in one step, call <tt>drawImage</tt> using
the target window's graphics object and the offscreen image. You
may have already noticed that Swing uses this technique in many of its
components, usually enabled by default, using the <tt>setDoubleBuffered</tt>
method.

<p>The screen surface is commonly referred to as the <i>primary surface</i>,
and the offscreen image used for double-buffering is commonly referred
to as the <i>back buffer</i>. The act of copying the contents from
one surface to another is frequently referred to as a block line transfer,
or <i>blitting</i> (blt is typically pronounced "blit" and shouldn't be
confused with a BLT sandwich).

<p><center><IMG SRC="../../figures/extra/fullscreen/doubleBuffering.gif" WIDTH="432" HEIGHT="315" ALIGN="BOTTOM" ALT="Double Buffering"></center></p>
<p>The primary surface is usually manipulated through the graphics object
of any showing component; when in full-screen mode, any operation using
the graphics of the full-screen window is a direct manipulation of screen
memory. For this reason, you can take advantage of other capabilities
in full-screen exclusive mode that may otherwise be unavailable due to
the overhead of the windowing system. One such technique that is
only available in full-screen exclusive mode is a form of double-buffering
called <i>page-flipping</i>.

<h4>Page Flipping</h4>

<p>Many graphics cards have the notion of a <i>video pointer</i>, which
is simply an address in video memory. This pointer tells the graphics
card where to look for the contents of the video to be displayed during
the next refresh cycle. In some graphics cards and on some operating
systems, this pointer can even be manipulated programmatically. Suppose
you created a back buffer (in video memory) of the exact width, height,
and bit depth of the screen, then drew to that buffer the same way as you
would using double-buffering. Now imagine what would happen if, instead
of blitting your image to the screen as in double-buffering, you simply
changed the video pointer to your back buffer. During the next refresh,
the graphics card would now use your image to display. This switch
is called page-flipping, and the performance gain over blt-based double-buffering
is that only a single pointer needs to be moved in memory as opposed to
copying the entire contents from one buffer to another.

<p>When a page flip occurs, the pointer to the old back buffer now points
to the primary surface and the pointer to the old primary surface now points
to the back buffer memory. This sets you up automatically for the
next draw operation.

<p><center><IMG SRC="../../figures/extra/fullscreen/pageFlipping.gif" WIDTH="474" HEIGHT="544" ALIGN="BOTTOM" ALT="Page Flipping"></center></p>
<p>Sometimes it is advantageous to set up multiple back buffers in a <i>flip
chain</i>. This is particularly useful when the amount of time spent
drawing is greater than the monitor's refresh rate. A flip chain
is simply two or more back buffers (sometimes called <i>intermediary buffers</i>)
plus the primary surface (this is sometimes called triple-buffering, quadruple-buffering,
etc.). In a flip chain, the next available back buffer becomes the
primary surface, etc., all the way down to the rearmost back buffer that
is used for drawing.

<h4>Benefits of Double-Buffering and Page-Flipping</h4>

If your performance metric is simply the speed at which double-buffering 
or page-flipping occurs versus direct rendering, you may be disappointed. 
You may find that your numbers for direct rendering far exceed those for 
double-buffering and that those numbers far exceed those for 
page-flipping. Each of these techniques is for used for 
improving <i>perceived performance</i>, which is much more important in 
graphical applications than <i>numerical performance</i>. 
<P>
Double-buffering is used primarily to eliminate visible draws which can 
make an application look amateurish, sluggish, or appear to flicker. 
Page-flipping is used primarily to also eliminate <i>tearing</i>, 
 a splitting effect that occurs when drawing to the screen happens 
faster than the monitor's refresh rate.  Smoother drawing means better 
perceived performance and a much better user experience.  

<P>
        </blockquote>
        <div class=NavBit>
            <a target=_top href=rendering.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=bufferstrategy.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Passive vs. Active Rendering
        <br><b>Next page:</b> <code>BufferStrategy</code> and <code>BufferCapabilities</code>
    </div>
    </body>
</html> 
