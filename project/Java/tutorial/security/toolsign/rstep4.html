<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>See the Policy File Effects (The Java&trade; Tutorials &gt; 
            Security Features in Java SE &gt; Signing Code and Granting It Permissions)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Security Features in Java SE
        <br><b>Lesson:</b> Signing Code and Granting It Permissions
        <br><b>Section:</b> Steps for the Code Receiver
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Signing Code and Granting It Permissions</a></div>
<div class="linkAHEAD"><a href="signer.html">Steps for the Code Signer</a></div>
<div class="linkBHEAD"><a href="step1.html">Download and Try the Sample Application</a></div>
<div class="linkBHEAD"><a href="step2.html">Create a JAR File Containing the Class File</a></div>
<div class="linkBHEAD"><a href="step3.html">Generate Keys</a></div>
<div class="linkBHEAD"><a href="step4.html">Sign the JAR File</a></div>
<div class="linkBHEAD"><a href="step5.html">Export the Public Key Certificate</a></div>
<div class="linkAHEAD"><a href="receiver.html">Steps for the Code Receiver</a></div>
<div class="linkBHEAD"><a href="rstep1.html">Observe the Restricted Application</a></div>
<div class="linkBHEAD"><a href="rstep2.html">Import the Certificate as a Trusted Certificate</a></div>
<div class="linkBHEAD"><a href="rstep3.html">Set Up a Policy File to Grant the Required Permission</a></div>
<div class="linkCHEAD"><a href="wstep1.html">Start Policy Tool</a></div>
<div class="linkCHEAD"><a href="wstep2.html">Specify the Keystore</a></div>
<div class="linkCHEAD"><a href="wstep3.html">Add a Policy Entry with a SignedBy Alias</a></div>
<div class="linkCHEAD"><a href="wstep4.html">Save the Policy File</a></div>
<div class="nolinkBHEAD">See the Policy File Effects</div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Security Features in Java SE</a>
                &gt;
                <a href=index.html target=_top>Signing Code and Granting It Permissions</a>
            </span>
            <div class=NavBit>
                <a target=_top href=wstep4.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=../toolfilex/index.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>See the Policy File Effects</div>
            <blockquote>
In the previous steps you created an entry in the <code>raypolicy</code> 
policy file granting code 
signed by <code>susan</code> permission to read files from the 
<code>C:\TestData\</code> directory (or 
the <code>testdata</code> directory in your home directory if
you're working on UNIX).
Now you should be able to successfully
execute the <code>Count</code> program to read and to
count the characters in a file from the specified directory, even when
you run the application with a security manager.

<p>As described at the end of the

<a class="TutorialLink" target="_top" href="../tour1/index.html">Quick Tour of Controlling Applets</a>
lesson, there are two possible ways you can have the 
<code>raypolicy</code> file be considered as part of the overall policy,
in addition to the policy files specified in the security properties file.
The first approach is to specify the additional policy file 
in a property passed to the runtime system.
The second approach is to add a line in the security properties 
file specifying the additional policy file.

</blockquote>
<h3><a name="Approach1">Approach 1</a></h3>

<blockquote>

You can use a <code>-Djava.security.policy</code> command-line 
argument to specify a policy file that should be used in addition to or
instead of the ones specified in the security properties file.

<p>To run the <code>Count</code> application and have the
<code>raypolicy</code> policy file included, type the
following while in the directory containing the
<code>sCount.jar</code> and <code>raypolicy</code> files:

<blockquote><pre>
<b>java -Djava.security.manager -Djava.security.policy=raypolicy
  -cp sCount.jar Count C:\TestData\data</b>
</pre></blockquote>

<p>Note: The command should be typed on a single line, with a space
between <code>raypolicy</code> and <code>-cp</code>.

<p>The program should report the number of characters in the specified
file.

<p>If it still reports an error, something is wrong in the policy file.
Use the Policy Tool to check the permission you just created in the
<a href = "rstep3.html">previous step</a>, and change any
typos or other errors.

</blockquote>


<h3><a name="Approach2">Approach 2</a></h3>

<blockquote>

You can specify a number of URLs -- including ones of the form "http://" --
in <code>policy.url.n</code> properties in the security properties file, and 
all the designated policy files will get loaded. 

<p>So one way to have your <code>raypolicy</code> file's policy entries considered by the
interpreter is to add an entry indicating that file in the security properties file.


<blockquote><hr><strong>Important:</strong>&nbsp; If you are running your own copy of the JDK, 
you can easily edit your
security properties file. If you are running a version shared
with others, you may only be able to modify the system-wide
security properties file if you have write access to it or if you ask your
system administrator to modify the file when appropriate. However, 
it's probably not appropriate for you to make modifications to a system-wide policy file
for this tutorial test; we suggest that you just read the following to see how it's done
or that you install your own private version of the JDK to use for the tutorial
lessons.
<hr></blockquote>

The security properties file is located at

<pre>
  <b>Windows</b>:
    <i>java.home</i>\lib\security\java.security 
  <b>UNIX</b>:
    <i>java.home</i>/lib/security/java.security
</pre>

The <i><code>java.home</code></i> portion indicates the directory into which 
the JRE was installed.

<p>To modify the security properties file, open it in an editor suitable for editing an 
ASCII text file. Then add the following line after the line starting with
<code>policy.url.2</code>:

<pre>
  <b>Windows</b>:
    <b>policy.url.3=file:/C:/Test/raypolicy</b>
  <b>UNIX</b>:
    <b>policy.url.3=file:${user.home}/test/raypolicy</b>
</pre>

<p>On a UNIX system you can alternatively explicitly specify your home directory, as in

<blockquote><pre>
<b>policy.url.3=file:/home/susanj/test/raypolicy</b>
</pre></blockquote>

Next, in your command window, go to the directory containing the
<code>sCount.jar</code> file, that is, the <code>C:\Test</code> 
or <code>~/test</code> directory.
Type the following command on one line:

<blockquote><pre>
<b>java -Djava.security.manager
        -cp sCount.jar Count C:\TestData\data</b>
</pre></blockquote>

<p>As with approach 1, if the program still reports an error, 
something is wrong with the policy file.
Use the Policy Tool to check the permission you just created in the
<a href = "rstep3.html">previous step</a>, and change any
typos or other errors.

<blockquote>
<hr>
<b>Important:</b> Before continuing, you may want to delete the line you just 
added in the security properties file (or comment it out)</b>, since you probably
do not want the <code>raypolicy</code> file included when you are not running 
the tutorial lessons. 
<hr></blockquote>


        </blockquote>
        <div class=NavBit>
            <a target=_top href=wstep4.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=../toolfilex/index.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Save the Policy File
        <br><b>Next page:</b> Exchanging Files
    </div>
    </body>
</html> 
