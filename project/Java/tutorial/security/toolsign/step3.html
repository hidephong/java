<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Generate Keys (The Java&trade; Tutorials &gt; 
            Security Features in Java SE &gt; Signing Code and Granting It Permissions)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Security Features in Java SE
        <br><b>Lesson:</b> Signing Code and Granting It Permissions
        <br><b>Section:</b> Steps for the Code Signer
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Signing Code and Granting It Permissions</a></div>
<div class="linkAHEAD"><a href="signer.html">Steps for the Code Signer</a></div>
<div class="linkBHEAD"><a href="step1.html">Download and Try the Sample Application</a></div>
<div class="linkBHEAD"><a href="step2.html">Create a JAR File Containing the Class File</a></div>
<div class="nolinkBHEAD">Generate Keys</div>
<div class="linkBHEAD"><a href="step4.html">Sign the JAR File</a></div>
<div class="linkBHEAD"><a href="step5.html">Export the Public Key Certificate</a></div>
<div class="linkAHEAD"><a href="receiver.html">Steps for the Code Receiver</a></div>
<div class="linkBHEAD"><a href="rstep1.html">Observe the Restricted Application</a></div>
<div class="linkBHEAD"><a href="rstep2.html">Import the Certificate as a Trusted Certificate</a></div>
<div class="linkBHEAD"><a href="rstep3.html">Set Up a Policy File to Grant the Required Permission</a></div>
<div class="linkCHEAD"><a href="wstep1.html">Start Policy Tool</a></div>
<div class="linkCHEAD"><a href="wstep2.html">Specify the Keystore</a></div>
<div class="linkCHEAD"><a href="wstep3.html">Add a Policy Entry with a SignedBy Alias</a></div>
<div class="linkCHEAD"><a href="wstep4.html">Save the Policy File</a></div>
<div class="linkBHEAD"><a href="rstep4.html">See the Policy File Effects</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Security Features in Java SE</a>
                &gt;
                <a href=index.html target=_top>Signing Code and Granting It Permissions</a>
            </span>
            <div class=NavBit>
                <a target=_top href=step2.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=step4.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>Generate Keys</div>
            <blockquote>
<p>If a code signer does not yet have a suitable private key for
signing the code, the key must first be generated, along with a
corresponding public key that can be used by the
code receiver's runtime system to verify the signature.

<p>Since this lesson assumes that you don't yet have such keys,
you are going to create a keystore named <code>susanstore</code> and
create an entry with a newly generated public/private key pair
(with the public key in a certificate). 

<p>Now pretend that you are Susan Jones and that you
work in company ABC's purchasing department.
Type the following command in your command window to create a 
keystore named <code>susanstore</code> and to
generate keys for Susan Jones:

<blockquote><pre>
<b>keytool -genkey -alias signFiles -keypass kpi135 
 -keystore susanstore -storepass ab987c</b>
</pre></blockquote>

<p><B>Note:</b>&nbsp;&nbsp; You must type this command on a single line. 


<H2>Subparts of the keytool Command </H2>

<p>Let's look at what each of the <code>keytool</code> subparts mean.

<ul>
<li>The command for generating keys is <i>-genkey</i>.
<li>The <i>-alias signFiles</i> subpart indicates the alias to be used in the future to refer to the
keystore entry containing the keys that will be generated.
<li>The <i>-keypass kpi135</i> subpart specifies a password for the private key about to be 
generated. You will always need this password in order to access the
keystore entry containing that key. The entry doesn't have to have its
own password. If you don't include a <i>-keypass</i> option, you will be prompted for the key password and given the option of letting it be the same as the keystore
password.
<li>The <i>-keystore susanstore</i> subpart indicates the name (and optionally path)
of the keystore you are creating or already using.
<li>The <i>-storepass ab987c</i> subpart indicates the keystore password.
If you don't include a <code>-storepass</code> option, you will be prompted
for the keystore password.
</ul>

<p><b>Note:</b>&nbsp;&nbsp;For security reasons you should not normally set your 
key or keystore passwords on the command line, because they can be intercepted more easily that way. Instead you should 
leave off the <code>-keypass</code> and the <code>-storepass</code>
options and type your passwords when you are prompted for them.




<H2>Distinguished-Name Information</H2>

<blockquote>

<p>If you use the preceding <code>keystore</code>command, you will be prompted for your 
distinguished-name information.
Following are the prompts; the bold indicates
what you should type.

<blockquote><pre>
What is your first and last name?
  [Unknown]:  <b>Susan Jones</b> 
What is the name of your organizational unit?
  [Unknown]:  <b>Purchasing</b> 
What is the name of your organization?
  [Unknown]:  <b>ABC</b> 
What is the name of your City or Locality?
  [Unknown]:  <b>Cupertino</b> 
What is the name of your State or Province?
  [Unknown]:  <b>CA</b> 
What is the two-letter country code for this unit?
  [Unknown]:  <b>US</b> 
Is &lt;CN=Susan Jones, OU=Purchasing, O=ABC,
    L=Cupertino, ST=CA, C=US&gt; correct?
  [no]:  <b>y</b> 
</pre></blockquote>

</blockquote>


<H2>Command Results</H2>

<blockquote>

<p>The <code>keytool</code> command creates the keystore named <code>susanstore</code>
(if it doesn't already exist) in the 
same directory in which the command is executed and assigns it the password 
<code>ab987c</code>. 
The command generates a public/private key pair for the entity whose distinguished
name has a
common name of Susan Jones and the organizational unit of Purchasing. 

<p>The command creates a self-signed certificate that includes
the public key and the distinguished-name information.
(The distinguised name you supply will be used as the "subject" field in the certificate.)
This certificate will be valid
for 90 days, the default validity period if you don't specify a
<i>-validity</i> option. The certificate is associated
with the private key in a keystore entry referred to by the
alias <code>signFiles</code>. The private key is assigned 
the password <code>kpi135</code>.

<p><b>Note:</b>&nbsp;&nbsp;The command could be shorter if option defaults 
are accepted or you wish to be prompted for various values.
Whenever you execute a <code>keytool</code> command, defaults are used for
unspecified options that have default values, and you are prompted for any
required values. For the <code>genkey</code> command, options with default 
values include <i>alias</i> (whose default is <code>mykey</code>), <i>validity</i> (90 days), and
<i>keystore</i> (the file named <code>.keystore</code> in your home directory).
Required values include <i>dname</i>, <i>storepass</i>, and <i>keypass</i>.

</blockquote>


        </blockquote>
        <div class=NavBit>
            <a target=_top href=step2.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=step4.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Create a JAR File Containing the Class File
        <br><b>Next page:</b> Sign the JAR File
    </div>
    </body>
</html> 
