



<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Manipulating Relative Distringuished Name (RDN) (The Java&trade; Tutorials &gt; 
            Java Naming and Directory Interface(TM). &gt; New features in JDK 5.0 and JDK 6)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Java Naming and Directory Interface(TM).
        <br><b>Lesson:</b> New features in JDK 5.0 and JDK 6
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">New features in JDK 5.0 and JDK 6</a></div>
<div class="linkAHEAD"><a href="dn.html">Retrieving Distinguished Name</a></div>
<div class="linkAHEAD"><a href="controls-std.html">Standard LDAP Controls</a></div>
<div class="linkAHEAD"><a href="paged-results.html">Paged Results Control</a></div>
<div class="linkAHEAD"><a href="sort.html">Sort Control</a></div>
<div class="linkAHEAD"><a href="mdsaIT.html">Manage Referral Control</a></div>
<div class="linkAHEAD"><a href="ldapname.html">Manipulating LdapName (Distinguished Name)</a></div>
<div class="nolinkAHEAD">Manipulating Relative Distringuished Name (RDN)</div>
<div class="linkAHEAD"><a href="readtimeout.html">Setting Timeout for Ldap Operations</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Java Naming and Directory Interface(TM).</a>
                &gt;
                <a href=index.html target=_top>New features in JDK 5.0 and JDK 6</a>
            </span>
            <div class=NavBit>
                <a target=_top href=ldapname.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=readtimeout.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>Manipulating Relative Distringuished Name (RDN)</div>
            <blockquote>
The class 
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/ldap/Rdn.html"><tt>javax.naming.ldap.Rdn</tt></a> represents a Relative Distinguished name
(RDN) as specified
in <a href=http://ietf.org/rfc/rfc2253.txt> RFC2253</a>.

An RDN represents a component of a DN as explained in the
<a href=ldapname.html> Manipulating LdapName</a> lesson.
An RDN is made up of type and value pair(s).
Examples of RDNs are:
<p>
<ul>
<li><tt>OU=Sun</tt>
<li><tt>OU=Sales+CN=J.Smith</tt>.<br>
The above example shows a representation of a multi-valued RDN. 
</ul>
The 
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/ldap/Rdn.html"><tt>Rdn</tt></a> class provides methods to access name/value pair(s) of an RDN, obtain
its string representation, retrieve an  
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/directory/Attributes.html"><tt>Attributes </tt></a> view, compare and determine
equality of RDNs and methods to escape and unescape the value part of the RDN. 
<p>
The <tt>Rdn</tt> class is immutable.
 
<p>
<h4>Constructing an Rdn</h4>
An Rdn can be constructed with the specified name and value pair, if
it's a single name/value paired RDN. For a multi-valued RDN, you
should create an attribute set consisting of all the name/value pairs 
and use a constructor that takes <tt>Attributes</tt> as an argument.
You can also create an Rdn from its string representation 
specified in <a href=http://ietf.org/rfc/rfc2253.txt>RFC2253</a>. Finally, you can clone an Rdn using its
copy constructor. Here is an <a href=examples/RdnConstructors.java>example</a>
that creates RDNs using different types of constructors.    
    <pre>
    <blackquote>
	Rdn rdn1 = new Rdn("ou= Juicy\\, Fruit");
        System.out.println("rdn1:" + rdn1.toString());

        Rdn rdn2 = new Rdn(rdn1);
        System.out.println("rdn2:" + rdn2.toString());

        Attributes attrs = new BasicAttributes();
        attrs.put("ou", "Juicy, Fruit");
        attrs.put("cn", "Mango");
        Rdn rdn3 = new Rdn(attrs);
        System.out.println("rdn3:" + rdn3.toString());

        Rdn rdn4 = new Rdn("ou", "Juicy, Fruit");
        System.out.println("rdn4:" + rdn4.toString());
    </pre>
    </blackquote>

<p>
<h4>Accessing type/value pairs of an RDN</h4>
The type/values of and RDN can be obtained using the methods below:
<p>
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/ldap/Rdn.html#getType()"><tt>getType()</tt></a><br>
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/ldap/Rdn.html#getValue()"><tt>getValue()</tt></a><br>
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/ldap/Rdn.html#toAttributes()"><tt>toAttributes()</tt></a><p>
For a an RDN made up of single type/value pair, the 
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/ldap/Rdn.html#getType()"><tt>getType()</tt></a>method returns the type and the  
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/ldap/Rdn.html#getValue()"><tt>getValue()</tt></a> method returns the value of the RDN.
The method 
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/ldap/Rdn.html#toAttributes()"><tt>toAttributes()</tt></a> returns the attribute view of the type/value pairs.
The <a href=examples/RdnGetters.java>example</a> below prints the
type/value pairs of RDNs.

    <pre>
    <blackquote>
	Attributes attrs = new BasicAttributes();
        attrs.put("o", "Yellow");
        attrs.put("cn", "Mango");

	// create a binary value for the RDN
        byte[] mangoJuice = new byte[6];
        for (int i = 0; i < mangoJuice.length; i++) {
            mangoJuice[i] = (byte) i;
        }
        attrs.put("ou", mangoJuice);
        Rdn rdn = new Rdn(attrs);
        
        System.out.println();
        System.out.println("size:" + rdn.size());
        System.out.println("getType(): " + rdn.getType());
        System.out.println("getValue(): " + rdn.getValue());
        
        // test toAttributes
        System.out.println();
        System.out.println("toAttributes(): " + rdn.toAttributes());
    </pre>
    </blackquote>
<p>

<h4>Getting the String Representation</h4>
In order to get the string representation of
an RDN formatted according to the syntax specified in
 <a href=http://ietf.org/rfc/rfc2253.txt>RFC2253</a>, you can use:
<p>
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/ldap/Rdn.html#toString()"><tt>toString()</tt></a><p>
When you use the Rdn constructor that takes a <tt>String</tt> argument,
you supply the string representation of an RDN, and get back an Rdn instance.
To do the reverse, that is, to get the string representation
of a Rdn instance, you use toString(). The result of toString() can be fed back
to the Rdn constructor to produce an Rdn instance that is equal to the original
Rdn instance.
<p>
Here's an <a href=examples/RdntoString.java>example</a>:
   <pre>
   <blackquote>
	Rdn rdn = new Rdn("cn=Juicy\\,Fruit");
	String str = rdn.toString();
	System.out.println(str);
	Rdn rdn2 = new Rdn(str);
	System.out.println(rdn.equals(rdn2));    // true
   </pre>
   </blackquote>	
<h4>Comparing RDNs</h4>
The methods below enable comparison of RDNs:
<p>
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/ldap/Rdn.html#equals(Object)"><tt>equals(Object Rdn)</tt></a><br>
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/ldap/Rdn.html#compareTo(Object)"><tt>compareTo(Object Rdn)</tt></a><p>
You can use compareTo() to sort a list of Rdn instances.
equals() lets you determine whether two Rdns are syntactically equal.
Two Rdns are equal if they both have the same (case-exact matched)
type/value pairs. The order of components in a multi-valued RDNs
is not significant. 
<p>
Here's an <a href=examples/CompareRdns.java>example</a>:
    <pre>
    <blackquote>
	Rdn one = new Rdn("ou=Sales+cn=Bob");
        Rdn two = new Rdn("cn=Bob+ou=Sales");
        Rdn three = new Rdn("ou=Sales+cn=Bob+c=US");
        Rdn four = new Rdn("cn=lowercase");
        Rdn five = new Rdn("cn=LowerCASE");
        System.out.println(one.equals(two));    // true
        System.out.println(two.equals(three));  // false
        System.out.println(one.equals(three));  // false
        System.out.println(four.equals(five));  // true
    </pre>
    </blackquote>

<h4>Escaping and Unescaping of Special Characters</h4>
One of the best use of Rdn class is when one has to deal with DNs consisting of
special characters. It automatically takes care of escaping and unescaping the
special characters. The characters such has '\' (backslash), ','(comma),
+ (plus) etc have a specific semantic according to  <a href=http://ietf.org/rfc/rfc2253.txt>RFC2253</a>.
You can find the list of all the special characters in RFC2253.
When these characters
are used as literals in a DN, they must be escaped with a '\' (blackslash).
<p>
For example, consider an RDN:
	<pre>
	 cn=Juicy, Fruit
       </pre>
The character , (comma) appearing between Juicy and Fruit is a special character that
needs to be escaped by a '\' (blackslash). The resulting syntactically
formatted RDN looks as below:
     <pre>
	cn=Juicy\, Fruit
      </pre>
However, the '\' (backslash) character itself is a special character according
to the Java Language String syntax, and it needs to escaped with a '\' (backslash) again.
The Java Language String format and  <a href=http://ietf.org/rfc/rfc2253.txt>RFC2253</a> both use '\' (backslash) to escape
the special characters. 
And therefore the Java formatted RDN String looks as below:
     <pre>
	cn=Juicy\\, Fruit
     </pre> 
Note that, the above mentioned formatting rules apply only to the value component of an Rdn.
The <tt>Rdn</tt> class provides two <tt>static</tt> methods to handle 
automatic escaping and unescaping of the RDN values:
<p>
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/ldap/Rdn.html#escapeValue()"><tt>escapeValue()</tt></a><br>
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/naming/ldap/Rdn.html#unescapeValue()"><tt>unescapeValue()</tt></a><p>
The <a href=examples/EscapingDNs.java>example</a> below shows how to get the string representation of a DN
without having to deal with the syntax for handling special characters defined
in <a href=http://ietf.org/rfc/rfc2253.txt>RFC2253</a>. 
<pre>
<blackquote>
    // DN with ',' (comma)
    String unformatted = "Juicy, Fruit";
    String formatted = Rdn.escapeValue(unformatted);
    LdapName dn = new LdapName("cn=" + formatted);
    System.out.println("dn:" + dn);


    unformatted = "true+false";
    formatted = Rdn.escapeValue(unformatted); 
    dn = new LdapName("cn=" + formatted);
    System.out.println("dn:" + dn);

    // DN with a binary value as one one of its attribute value
    byte[] bytes = new byte[] {1, 2, 3, 4};
    formatted = Rdn.escapeValue(bytes);
    System.out.println("Orig val: " + bytes +
		"	Escaped val: " + formatted);
</pre>
</blackquote>
Similarly the using the static <tt>unescapeValue()</tt> method one can obtain the
original string from the formatted value. <a href=examples/UnescapingValues.java>Here</a> is an example for retrieving
the original value.

<pre>
<blackquote>
    // DN with ',' (comma)
    String unformatted = "Juicy, Fruit";
    String formatted = Rdn.escapeValue(unformatted);
    System.out.println("Formatted:" + formatted);
    Object original = Rdn.unescapeValue(formatted);
    System.out.println("Original:" +  original);  

    // DN with a '+' (plus)
    unformatted = "true+false";
    formatted = Rdn.escapeValue(unformatted); 
    System.out.println("Formatted:" + formatted);
    original = Rdn.unescapeValue(formatted);
    System.out.println("Original:" +  original);  

    // DN with a binary value as one one of its attribute value
    byte[] bytes = new byte[] {1, 2, 3, 4};
    formatted = Rdn.escapeValue(bytes);
    System.out.println("Formatted:" + formatted);
    original = Rdn.unescapeValue(formatted);
    System.out.println("Original:" +  original);  
</blackquote>
</pre>
<p>
        </blockquote>
        <div class=NavBit>
            <a target=_top href=ldapname.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=readtimeout.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Manipulating LdapName (Distinguished Name)
        <br><b>Next page:</b> Setting Timeout for Ldap Operations
    </div>
    </body>
</html> 
