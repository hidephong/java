<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Playing Sounds (The Java&trade; Tutorials &gt; 
            Deployment &gt; Applets)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Deployment
        <br><b>Lesson:</b> Applets
        <br><b>Section:</b> Taking Advantage of the Applet API
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Applets</a></div>
<div class="linkAHEAD"><a href="getStarted.html">Getting Started with Applets</a></div>
<div class="linkBHEAD"><a href="import.html">Importing Classes and Packages for Applets</a></div>
<div class="linkBHEAD"><a href="subclass.html">Defining an Applet Subclass</a></div>
<div class="linkBHEAD"><a href="lifeCycle.html">The Life Cycle of an Applet</a></div>
<div class="linkBHEAD"><a href="appletMethods.html">Methods for Milestones</a></div>
<div class="linkBHEAD"><a href="componentMethods.html">Methods for Drawing and Event Handling</a></div>
<div class="linkBHEAD"><a href="containerMethods.html">Methods for Adding UI Components</a></div>
<div class="linkBHEAD"><a href="security.html">What Applets Can and Can't Do</a></div>
<div class="linkAHEAD"><a href="appletsonlyindex.html">Taking Advantage of the Applet API</a></div>
<div class="linkBHEAD"><a href="data.html">Finding and Loading Data Files</a></div>
<div class="linkBHEAD"><a href="showStatus.html">Displaying Short Status Strings</a></div>
<div class="linkBHEAD"><a href="browser.html">Displaying Documents in the Browser</a></div>
<div class="linkBHEAD"><a href="iac.html">Sending Messages to Other Applets</a></div>
<div class="nolinkBHEAD">Playing Sounds</div>
<div class="linkBHEAD"><a href="param.html">Defining and Using Applet Parameters</a></div>
<div class="linkCHEAD"><a href="paramQs.html">Deciding Which Parameters to Support</a></div>
<div class="linkCHEAD"><a href="getParam.html">Writing the Code to Support Parameters</a></div>
<div class="linkCHEAD"><a href="paramInfo.html">Giving Information about Parameters</a></div>
<div class="linkBHEAD"><a href="html.html">Using the APPLET Tag	</a></div>
<div class="linkAHEAD"><a href="practicalindex.html">Practical Considerations When Writing Applets</a></div>
<div class="linkBHEAD"><a href="security_practical.html">Security Restrictions</a></div>
<div class="linkBHEAD"><a href="ui.html">Creating a User Interface</a></div>
<div class="linkCHEAD"><a href="gui.html">Creating a GUI</a></div>
<div class="linkCHEAD"><a href="stdout.html">Displaying Diagnostics to the Standard Output and Error Streams</a></div>
<div class="linkBHEAD"><a href="properties.html">Getting System Properties</a></div>
<div class="linkBHEAD"><a href="threads.html">Threads in Applets</a></div>
<div class="linkCHEAD"><a href="threadExample.html">Threads in Applets: Examples</a></div>
<div class="linkBHEAD"><a href="server.html">Working with a Server-Side Application </a></div>
<div class="linkCHEAD"><a href="clientExample.html">A Simple Network Client Applet</a></div>
<div class="linkCHEAD"><a href="workaround.html">Using a Server to Work Around Security Restrictions</a></div>
<div class="linkAHEAD"><a href="finishingindex.html">Finishing an Applet</a></div>
<div class="linkBHEAD"><a href="checklist.html">Before You Ship that Applet</a></div>
<div class="linkBHEAD"><a href="perfect.html">The Perfectly Finished Applet</a></div>
<div class="linkAHEAD"><a href="deployindex.html">Deploying Applets</a></div>
<div class="linkBHEAD"><a href="generaldeploy.html">General Deployment Considerations</a></div>
<div class="linkBHEAD"><a href="applettag.html">Using the applet Tag</a></div>
<div class="linkBHEAD"><a href="objecttag.html">Using the object Tag</a></div>
<div class="linkBHEAD"><a href="embedtag.html">Using the embed Tag</a></div>
<div class="linkBHEAD"><a href="mixedbrowser.html">Deploying Applets in a Mixed-Browser Environment</a></div>
<div class="linkAHEAD"><a href="problemsindex.html">Solving Common Applet Problems</a></div>
<div class="linkQUESTIONS"><a href="QandE/questions.html">Questions and Exercises</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Deployment</a>
                &gt;
                <a href=index.html target=_top>Applets</a>
            </span>
            <div class=NavBit>
                <a target=_top href=iac.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=param.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>Playing Sounds</div>
            <blockquote>
<p>
The
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/javax/swing/JApplet.html"><code>JApplet</code></a>
class in the Java Swing package (<code>javax.swing</code>), and the

<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/applet/AudioClip.html"><code>AudioClip</code></a>
interface in the Java Applet package (<code>java.applet</code>)
provide basic support for playing sounds. Currently, the Java API
supports only one sound format: 8 bit, &#181;-law, 8000 Hz,
one-channel, Sun &quot;.au&quot; files.
You can create these on a Sun workstation 
using the <code>audiotool</code> application.
You can convert files from other sound formats using an audio
format conversion program.
</p>

</blockquote>
<h3>Sound-Related Methods</h3>
<blockquote>
<p>
Below are the sound-related <code>Applet</code> methods.
The two-argument form of each method takes a base URL, which is
usually returned by either <code>getDocumentBase</code> or
<code>getCodeBase</code>, and the location of the sound file
relative to the base URL.
</p>
<dl>
<dt>

<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/applet/Applet.html#getAudioClip"><code>getAudioClip(URL)</code>, <code>getAudioClip(URL, String)</code></a>
<dd> Return an object that implements the <code>AudioClip</code> interface.
<dt> 
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/applet/Applet.html#play"><code>play(URL)</code>, <code>play(URL, String)</code></a>
<dd> Play the <code>AudioClip</code> corresponding to the specified URL.
</dl>

<p>

The <code>AudioClip</code> interface defines the following methods:
</p>
<dl>
<dt> 
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/applet/AudioClip.html#loop"><code>loop</code></a>
<dd> Starts playing the clip repeatedly. 
<dt> 
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/applet/AudioClip.html#play"><code>play</code></a>
<dd> Plays the clip once.
<dt> 
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/applet/AudioClip.html#stop"><code>stop</code></a>
<dd> Stops the clip.
     Works with both looping and one-time sounds.
</dl>


</blockquote>
<h3>An Example</h3>
<blockquote>
<p>
Here is an applet called SoundExample that illustrates a few things about
sound. Note that, for instructional purposes, the applet adds up to 10
seconds to the load time for each sound. If the sounds were larger or the
user's connection slower than ours, these delays might be realistic.
</p>
<p>
<applet code=SoundExample.class codebase=examples/ archive=sound.jar width=600 height=50>
</applet>

<blockquote><hr><strong>Note:</strong> If you don't see the applet running above, you need to install Java Plug-in, which happens automatically when you <a href="http://java.sun.com/javase/downloads" target="_blank">install the Java(TM) SE JRE or JDK</a>. This applet requires JDK 1.4 or later. You can find more information on the <a href="http://java.sun.com/products/plugin" target="_blank">Java Plug-in home page.</a><hr></blockquote></p>
<p>

The SoundExample applet provides an architecture for loading and
playing multiple sounds in an applet. For this reason,
it is more complex than necessary. Essentially,
the sound loading and playing code boils down to this:

<blockquote><pre>
AudioClip onceClip, loopClip;
onceClip = applet.getAudioClip(getCodeBase(), "bark.au");
loopClip = applet.getAudioClip(getCodeBase(), "train.au");
onceClip.play();     //Play it once.
loopClip.loop();     //Start the sound loop.
loopClip.stop();     //Stop the sound loop.
</pre></blockquote>

</p>
<p>

Since there's nothing more annoying than an applet that continues to make noise after you've left its page, the SoundExample applet stops playing the continuously looping sound when the user leaves the page,
and resumes playing it when the user comes back. It does this by implementing its  <code>stop</code> and  <code>start</code> methods as follows:

<blockquote><pre>
public void stop() {
    //If one-time sound were long, we'd stop it here, too.  
    <em>//looping is a boolean instance variable that's initially
    //false. It's set to true when the "Start sound loop" button
    //is clicked and to false when the "Stop sound loop" or "Reload
    //sounds" button is clicked.</em>
    if (looping) {
        loopClip.stop();    //Stop the sound loop.
    }
}
 
public void start() {
    if (looping) {
        loopClip.loop();    //Restart the sound loop.
    }
}    
</pre></blockquote>
</p>
<p>

The SoundExample applet features three classes:
</p>
<ul>
<li> A <code>JApplet</code> subclass, 
<a class="SourceLink" target="_blank" href="examples/SoundExample.java"><code>SoundExample</code></a>,
     that controls the applet's execution.
<li> A <code>Hashtable</code> subclass, 
<a class="SourceLink" target="_blank" href="examples/SoundList.java"><code>SoundList</code></a>, that holds <code>AudioClip</code>s. This is overkill for this applet, but if you were to write an applet that used lots of sound files, a class like this would be useful.

<li> A <code>Thread</code> subclass, 
<a class="SourceLink" target="_blank" href="examples/SoundLoader.java"><code>SoundLoader</code></a>, each instance of which loads an <code>AudioClip</code> in the background. During the applet's initialization, the applet preloads each sound by creating a <code>SoundLoader</code> for it.
</ul>

<p>
Preloading the sounds in a background thread (with <code>SoundLoader</code>) improves the perceived performance by reducing the amount of time the user has to wait to be able to interact with the applet. It does this by reducing the amount of time spent in the <code>init</code> method. If you simply called <code>getAudioClip</code>
in the applet's <code>init</code> method, it could take quite a while before <code>getAudioClip</code> returned, meaning that the applet couldn't perform the other statements in its <code>init</code> method,
and that the applet's <code>start</code> wouldn't get called. (For this SoundExample applet, a delay in calling the <code>start</code> method doesn't matter.)
</p>
<p>
Another advantage of loading the sounds in a background thread is that it enables the applet to respond appropriately (and immediately) to user input that would normally cause a sound to play, even if that sound hasn't been loaded yet. If you simply use the <code>Applet play</code> method, for example, then the first time the user does something to make the applet play a particular sound, the applet's drawing and event handling are frozen while the sound is loaded. Instead, this applet detects that the sound hasn't been loaded yet and responds appropriately.
</p>
<p>

This example is discussed in more detail in
<a class="TutorialLink" target="_top" href="threadExample.html">Threads in Applets: Examples</a>.

        </blockquote>
        <div class=NavBit>
            <a target=_top href=iac.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=param.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Sending Messages to Other Applets
        <br><b>Next page:</b> Defining and Using Applet Parameters
    </div>
    </body>
</html> 
