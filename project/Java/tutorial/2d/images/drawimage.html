<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Drawing an Image (The Java&trade; Tutorials &gt; 
            2D Graphics &gt; Working with Images)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> 2D Graphics
        <br><b>Lesson:</b> Working with Images
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Working with Images</a></div>
<div class="linkAHEAD"><a href="loadimage.html">Reading/Loading an Image</a></div>
<div class="nolinkAHEAD">Drawing an Image</div>
<div class="linkAHEAD"><a href="drawonimage.html">Creating and Drawing to an Image</a></div>
<div class="linkAHEAD"><a href="saveimage.html">Writing/Saving an Image</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>2D Graphics</a>
                &gt;
                <a href=index.html target=_top>Working with Images</a>
            </span>
            <div class=NavBit>
                <a target=_top href=loadimage.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=drawonimage.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>Drawing an Image</div>
            <blockquote>
<P>As you have already learned, the <CODE>Graphics.drawImage</CODE> method
draws an image at a specific location: 
<pre>
boolean Graphics.drawImage(Image img, 
                           int x, int y,
                           ImageObserver observer);
</pre>
<P>The <CODE>x,y</CODE> location specifies the position for the top-left of the image.
The <CODE>observer</CODE> parameter notifies the application of updates to an image that 
is loaded asynchronously. The <code>observer</code> parameter is not frequently used directly and is not
needed for the 
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/awt/image/BufferedImage.html"><code>BufferedImage</code></a> class, so it usually is null.
<P>The described method addresses only the case where the entire image
is to be drawn, mapping image pixels to user space coordinates 1:1.
Sometimes applications require to draw a part of the image (a sub-image),
or scale the image to cover a particular area of the drawing
surface, or transform or filter the image before drawing.

<P>The overloads of the <code>drawImage()</code> method
perform these operations. For example, the following overload of
the <CODE>drawImage()</CODE> method enables you to draw as much of a specified area of the 
specified image as is currently available, scaling it to fit inside
the specified area of the destination drawable surface: 
<pre>
boolean Graphics.drawImage(Image img,
                           int dstx1, int dsty1, int dstx2, int dsty2,
                           int srcx1, int srcy1, int srcx2, int srcy2,
                           ImageObserver observer);
</pre>
<P>The <code>src</code> parameters represent the area of the image to
copy and draw. The <code>dst</code> parameters display the area of the
destination to cover by the the source area. The <CODE>dstx1, dsty1</CODE> 
coordinates define the location to draw the image. The width and height 
dimensions on the destination area are calculated by the following expressions:
<CODE>(dstx2-dstx1), (dsty2-dsty1)</CODE>. If the dimensions of the source
and destinations areas are different, the Java 2D&trade; API will scale up or scale down,
as needed.

<P>The following code example divides an image into four quadrants and randomly draws each quadrant
of the source image into a different quadrant of the destination.

<P align="center">
<APPLET code="JumbledImageApplet.class" codebase="examples/" 
width=400 height=250></APPLET>

<blockquote><hr><strong>Note:</strong> If you don't see the applet running above, you need to install <a href="http://java.sun.com/javase/downloads/index.jsp">release 6 of the JDK</a>.

The complete code for this applet is in

<a class="SourceLink" target="_blank" href="examples/JumbledImageApplet.java"><code>JumbledImageApplet.java</code></a>. This example uses the following code to paint the
jumbled <a href="examples/duke_skateboard.jpg"><code>duke_skateboard.jpg</code></a>
image.
It iterates over the four sub-images of the source, drawing each in turn
into a randomly selected destination quadrant.

<pre>
        /* divide the image 'bi' into four rectangular areas and draw each
         * of these areas in to a different part of the image, so as to
         * jumble up the image.
         * 'cells' is an array which has been populated with values
         * which redirect drawing of one subarea to another subarea.
         */
        int cellWidth = bi.getWidth(null)/2;
        int cellHeight = bi.getHeight(null)/2;
        for (int x=0; x&lt;2; x++) {
            int sx = x*cellWidth;
            for (int y=0; y&lt;2; y++) {
                int sy = y*cellHeight;
                int cell = cells[x*2+y];
                int dx = (cell / 2) * cellWidth;
                int dy = (cell % 2) * cellHeight;
                g.drawImage(bi,
                            dx, dy, dx+cellWidth, dy+cellHeight,
                            sx, sy, sx+cellWidth, sy+cellHeight,
                            null);
            }
        }

</pre>

<h3>Filtering Images</h3>
<p>
In addition to copying and scaling images, the Java 2D API also filter an image.
<EM class="Emphasis">Filtering</EM> is drawing or producing a new image by applying an algorithm
to the pixels of the source image.
Image filters can be applied by using the following method:
<pre>
void Graphics2D.drawImage(BufferedImage img,
                          BufferedImageOp op,
                          int x, int y)
</pre>
<P>The <code>BufferedImageOp</code> parameter implements the filter.
The following applet represents an image drawn on top of text.
Drag the slider to show more or less of the text through the image and make
the image more or less transparent.

<P align="center">
<APPLET code="SeeThroughImageApplet.class" codebase="examples/" 
width=400 height=250></APPLET>

<blockquote><hr><strong>Note:</strong> If you don't see the applet running above, you need to install <a href="http://java.sun.com/javase/downloads/index.jsp">release 6 of the JDK</a>.
<P>The following code shows how the filter action is done by operating on a
<CODE>BufferedImage</CODE> object with an <EM class="Emphasis">alpha</EM> 
channel and rescales that alpha channel by using the <code>RescaleOp</code> object.
The alpha channel determines the translucency of each pixel.
It also specifies the
degree to which this image overwrites.

<pre>
   /* Create an ARGB BufferedImage */
   BufferedImage img = ImageIO.read(imageSrc);
   int w = img.getWidth(null);
   int h = img.getHeight(null);
   BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);
   Graphics g = bi.getGraphics();
   g.drawImage(img, 0, 0, null);

   /* Create a rescale filter op that makes the image 50% opaque */
   float[] scales = { 1f, 1f, 1f, 0.5f };
   float[] offsets = new float[4];
   RescaleOp rop = new RescaleOp(scales, offsets, null);

   /* Draw the image, applying the filter */
   g2d.drawImage(bi, rop, 0, 0);

</pre>

<P>The complete example represented in

<a class="SourceLink" target="_blank" href="examples/SeeThroughImageApplet.java"><code>SeeThroughImageApplet.java</code></a> includes the code that uses the slider to
adjust the transparency from the initial 50%. This example also requires  
the <a href="examples/duke_skateboard.jpg">duke_skateboard.jpg</a> image.</P>
<P>The <code>RescaleOp</code> object is just one of many filters that can be
created. The Java 2D API has several built in filters including the following:
<ul>
<li><CODE>ConvolveOp</CODE>. Each output pixel is computed from surrounding pixels in
the source image. It may be used to blur or sharpen images.</LI>
<li><CODE>AffineTransformOp</CODE>. This filter maps pixels in the source to a different position
in the destination by applying a transformation on the pixel location.</LI>
<li><CODE>LookupOp</CODE>. This filter uses an application supplied lookup table to remap pixel colors.</LI>
<li><CODE>RescaleOp</CODE>. This filter multiplies the colors by some factor. Can be used to lighten
or darken the image, to increase or reduce its opacity, etc.</LI>
</ul>

<P>The following example uses each of the described filters as well as scaling: 
<P align="center">
<APPLET code="ImageDrawingApplet.class" codebase="examples/" 
width=400 height=250></APPLET>

<blockquote><hr><strong>Note:</strong> If you don't see the applet running above, you need to install <a href="http://java.sun.com/javase/downloads/index.jsp">release 6 of the JDK</a>.

The complete code for this applet is in

<a class="SourceLink" target="_blank" href="examples/ImageDrawingApplet.java"><code>ImageDrawingApplet.java</code></a> and this applet requires the <a href="examples/bld.jpg">bld.jpg</a> image.
<P>Use the drop-down menu to select an image scaling or
filtering operation.



        </blockquote>
        <div class=NavBit>
            <a target=_top href=loadimage.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=drawonimage.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Reading/Loading an Image
        <br><b>Next page:</b> Creating and Drawing to an Image
    </div>
    </body>
</html> 
