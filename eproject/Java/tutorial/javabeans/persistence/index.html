<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Lesson: Bean Persistence (The Java&trade; Tutorials &gt; JavaBeans(TM))</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
    </head>
<body>
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                    <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                        <br>
                    </div> 
                </div> </div> </div> </div> </div>

    <div class=MainFlow_wide>
        <div class=PrintHeaders>
            <b>Trail:</b> JavaBeans(TM)
        </div>
        <div id=BreadCrumbs>
            <a href=../../index.html target=_top>Home Page</a>
        &gt;
            <a href=../index.html target=_top>JavaBeans(TM)</a>
        </div>
        <div class=NavBit>
                <a target=_top href=../events/index.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=../longpersistence/index.html>Next&nbsp;&raquo;</a>
        </div>
        <div id=PageTitle>Lesson: Bean Persistence</div>
        <blockquote>
<P>A bean has the property of persistence when its properties, fields, and 
state information are saved to and retrieved from storage. Component models 
provide a mechanism for persistence that enables the state of components to be 
stored in a non-volatile place for later retrieval. 
<P> The mechanism that makes persistence possible is called <EM class="Emphasis">
serialization</EM>. Object serialization means converting an object into a data stream and writing 
it to storage. Any applet, application, or tool that uses that bean can then 
"reconstitute" it by deserialization. The object is then restored to its 
original state. 
    
<P>For example, a Java application can serialize a Frame window on a Microsoft 
Windows machine, the serialized file can be sent with e-mail to a Solaris 
machine, and then a Java application can restore the Frame window to the exact 
state which existed on the Microsoft Windows machine. 
<P>Any applet, application, or tool that uses that bean can then "reconstitute" it by
<i>deserialization</i>.
<p>
All beans must persist. To persist, your beans must
support serialization by implementing either the
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/io/Serializable.html"><code>java.io.Serializable</code></a>(in the API reference documentation) interface, or the
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/io/Externalizable.html"><code>java.io.Externalizable</code></a>(in the API reference documentation) interface. These interfaces offer you the choices of automatic 
serialization and customized serialization. If any class in a class's 
inheritance hierarchy implements <CODE>Serializable</CODE> or <CODE>Externalizable</CODE>,
then that class is serializable. 
</blockquote>
<h3>Classes That Are Serializable</h3>
<blockquote>
Any class is serializable as long as that class or a parent class
implements the <CODE>java.io.Serializable</CODE> interface. Examples of serializable classes
include <CODE>Component</CODE>, <CODE>String</CODE>, <CODE>Date</CODE>, <CODE>Vector</CODE>,
and <CODE>Hashtable</CODE>. Thus, any
subclass of the <CODE>Component</CODE> class, including <CODE>Applet</CODE>, can be serialized.
Notable classes not supporting serialization include <CODE>Image</CODE>, <CODE>Thread</CODE>,
<CODE>Socket</CODE>, and <CODE>InputStream</CODE>. Attempting to serialize objects of these
types will result in an <CODE>NotSerializableException</CODE>.
<P>
The Java Object Serialization API automatically serializes most fields of a 
Serializable object to the storage stream. This includes primitive types, 
arrays,and strings. The API does not serialize or deserialize fields 
that are marked transient or static.
</blockquote>
<h3>Controlling Serialization</h3>
<blockquote>
<p>
You can control the level of serialization that your
beans undergo. Three ways to control serilization are:

<ul>
  <li>Automatic serialization, implemented by the <CODE>Serializable</CODE> interface. 
  The Java serialization software serializes the entire object, except transient and 
static fields.
  <li>Customized serialization. Selectively exclude fields you do not want 
serialized by marking with the <CODE>transient</CODE> (or <CODE>static</CODE>) modifier.
  <li>Customized file format, implemented by the <CODE>Externalizable</CODE> interface and 
its two methods. Beans are written in a specific file format.
</ul>

<h3>Default Serialization: The Serializable Interface</h3>
<p>
The <code>Serializable</code> interface provides automatic
serialization by using the Java Object Serialization tools.
<code>Serializable</code> declares no methods; it acts as a marker,
telling the Object Serialization tools that your bean class is serializable. 
Marking your class <code>Serializable</code> means you
are telling the Java Virtual Machine (JVM) that you have made sure your class
will work with default serialization. Here are some
important points about working with the <code>Serializable</code>
interface:
<ul>
  <li>Classes that implement <code>Serializable</code> must have
      an access to a <em>no-argument constructor</em> of supertype. This constructor will
      be called when an object is "reconstituted" from a
      <code>.ser</code> file.
  <li>You don't need to implement <code>Serializable</code> in
      your class if it is already implemented in a superclass.
  <li>All fields except static and transient fields are serialized. Use
      the <code>transient</code> modifier to specify fields you do not
      want serialized, and to specify classes that are not serializable.
</ul>
<h3>Selective Serialization Using the transient Keyword</h3>
<p>
To exclude fields from serialization in a <code>Serializable</code> object
from serialization, mark the fields
with the <code>transient</code> modifier.
<blockquote><pre>
transient int status;
</pre></blockquote>
Default serialization will not serialize <code>transient</code> and
<code>static</code> fields.

<h3>Selective Serialization: writeObject and readObject</h3>

<p>
If your serializable class contains either of the
following two methods (the signatures must be exact), then
the default serialization will not take place.

<blockquote><pre>
private void writeObject(java.io.ObjectOutputStream out)
    throws IOException;
private void readObject(java.io.ObjectInputStream in)
    throws IOException, ClassNotFoundException;
</pre></blockquote>

<p>
You can control how more complex objects are serialized,
by writing your own implementations of the
<code>writeObject</code> and <code>readObject</code>
methods.
Implement <code>writeObject</code> when you need to exercise greater control over what gets serialized when you 
need to serialize objects that default serialization cannot handle, or when you 
need to add data to the serialization stream that is not an object data member.
Implement <code>readObject</code> to reconstruct the
data stream you wrote with <code>writeObject</code>.

<h3>The Externalizable Interface</h3>
<p>
Use the <code>Externalizable</code> interface
when you need complete control over your bean's serialization
(for example, when writing and reading a specific file format).
To use the <code>Externalizable</code> interface you need to implement 
two methods: <code>readExternal</code> and
<code>writeExternal</code>. Classes that 
implement <CODE>Externalizable</CODE> must have a no-argument constructor. 


        </blockquote>
    <div class=NavBit>
        <a href=../events/index.html>&laquo; Previous</a>
        &bull;
        <a href=../TOC.html>Trail</a>
        &bull;
        <a href=../longpersistence/index.html>Next &raquo;</a>
    </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Previous Lesson
        <br><b>Next page:</b> Long Term Persistence
    </div>
    </body>
</html> 
