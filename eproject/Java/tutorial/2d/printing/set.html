<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Printing a Multiple Page Document (The Java&trade; Tutorials &gt; 
            2D Graphics &gt; Printing)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> 2D Graphics
        <br><b>Lesson:</b> Printing
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Printing</a></div>
<div class="linkAHEAD"><a href="printable.html">A Basic Printing Program</a></div>
<div class="linkAHEAD"><a href="dialog.html">Using Print Setup Dialogs</a></div>
<div class="nolinkAHEAD">Printing a Multiple Page Document</div>
<div class="linkAHEAD"><a href="services.html">Working with Print Services and Attributes</a></div>
<div class="linkAHEAD"><a href="gui.html">Printing the Contents of a User Interface</a></div>
<div class="linkAHEAD"><a href="swing.html">Printing Support in Swing Components</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>2D Graphics</a>
                &gt;
                <a href=index.html target=_top>Printing</a>
            </span>
            <div class=NavBit>
                <a target=_top href=dialog.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=services.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>Printing a Multiple Page Document</div>
            <blockquote>
<P>You have already learned how to use the 
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/awt/print/Printable.html"><code>Printable</code></a>
interface to print a single page document.
However, documents are usually contain more than one physical page in length.
<em class="Emphasis">Pagination</em> is the process of identifying the location in a document where
page breaks and printing accordingly.
<P>
In case of printing several graphics images, one per page, use the page 
index to iterate through these pages and print one on
each page.

For example, if several images are represented in the following array:
<pre>
BufferedImage[] images = new BufferedImage[10];
</pre>
then use the <code>print()</code> method as shown in the following code
fragment:

<pre>
public int print(Graphics graphics, PageFormat pageFormat, int pageIndex)
            throws PrinterException {

    if (pageIndex &lt; images.length) {
        graphics.drawImage(images[pageIndex], 100, 100, null);
        return PAGE_EXISTS;
    } else {
        return NO_SUCH_PAGE:
    }
}
</pre>

If the document is continuous, the application must calculate how much content 
can fit on each page, and break the page at that point.
If text document consists of many lines, then an application must calculate how many of these lines can fit entirely on 
a page.

The 
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/awt/Point.html"><CODE>Point</CODE></a> class creates a point representing a location in (x,y) 



<p>To calculate the height of a single line of text, use the 

<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/awt/FontMetrics.html"><code>FontMetrics</code></a>


class.
<pre>
Font font = new Font("Serif", Font.PLAIN, 10);
FontMetrics metrics = graphics.getFontMetrics(font);
int lineHeight = metrics.getHeight();
</pre>

<P>The <code>PageFormat</code> parameter describes the
printable area of the page. In particular, to find the vertical
span of the page use the following code fragment:

<pre>
double pageHeight = pageFormat.getImageableHeight();
</pre>
Use the following code fragment to calculate the number of lines that fit 
on a page and the number of page breaks:
<pre>
int linesPerPage = ((int)pageHeight)/lineHeight);
int numBreaks = (textLines.length-1)/linesPerPage;
int[] pageBreaks = new int[numBreaks];
for (int b=0; b &lt; numBreaks; b++) {
    pageBreaks[b] = (b+1)*linesPerPage; 
}
</pre>

<P>Use the <CODE>print()</CODE> method to calculate the printable area for the 
following reasons:
<UL>
<LI>Text measurement depends on the <code>FontRenderContext</code>
  and this is implicit in the <code>FontMetrics</code> object returned by
  the printer graphics which is not available except inside the
  <code>print()</code> method.</LI>
<LI>The page format may not be disclosured until printing occurs. Since if
  the user selected a landscape mode in the print dialog, then this setting 
  needs to be accounted for. The <CODE>PageFormat</CODE> object passed into 
  the <CODE>print()</CODE> method provides this information.</LI>
</UL>

The page break positions are used as represented in the following code 
fragment:

<pre>
/* Draw each line that is on this page.
 * Increment 'y' position by lineHeight for each line.
 */
int y = 0; 
int start = (pageIndex == 0) ? 0 : pageBreaks[pageIndex-1];
int end   = (pageIndex == pageBreaks.length)
                 ? textLines.length : pageBreaks[pageIndex];
for (int line=start; line&lt;end; line++) {
    y += lineHeight;
    g.drawString(textLines[line], 0, y);
}
</pre>

If a document contains 100 lines and only 48 lines fit on a page,  
then an application prints 3 pages with page breaks after
48 and 96 lines of text. The remaining 4 lines are printed on the last page.

The complete code for this example is in

<a class="SourceLink" target="_blank" href="examples/PaginationExample.java"><code>PaginationExample.java</code></a>.
<P>The following simplifying factors are used in the <CODE>PaginationExample</CODE> code:
<UL>
<LI>Each page has the same height.</LI>
<LI>The same font is used.</LI>
</UL>

        </blockquote>
        <div class=NavBit>
            <a target=_top href=dialog.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=services.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Using Print Setup Dialogs
        <br><b>Next page:</b> Working with Print Services and Attributes
    </div>
    </body>
</html> 
