
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Compatibility (The Java&trade; Tutorials &gt; 
            Collections &gt; Interoperability)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Collections
        <br><b>Lesson:</b> Interoperability
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Interoperability</a></div>
<div class="nolinkAHEAD">Compatibility</div>
<div class="linkAHEAD"><a href="api-design.html">API Design</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Collections</a>
                &gt;
                <a href=index.html target=_top>Interoperability</a>
            </span>
            <div class=NavBit>
                <a target=_top href=index.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=api-design.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>Compatibility</div>
            <blockquote>
The Java Collections Framework was designed to ensure complete
interoperability between the core
<a class="TutorialLink" target="_top" href="../interfaces/index.html">collection interfaces</a> and the types that were used to represent collections in the early
versions of the Java platform:

<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/Vector.html"><code>Vector</code></a>, 
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/Hashtable.html"><code>Hashtable</code></a>, 
<a class="TutorialLink" target="_top" href="../../java/nutsandbolts/arrays.html">array</a>, and
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/Enumeration.html"><code>Enumeration</code></a>.  In this section, you'll learn how to transform old collections to the Java
Collections Framework collections and vice versa.

</blockquote>

<h3 fmstyle=D-Head>Upward Compatibility</h3>

<blockquote>

Suppose that you're using an API that returns legacy collections in
tandem with another API that requires objects implementing the
collection interfaces. To make the two APIs interoperate smoothly,
you'll have to transform the legacy collections into modern collections.
Luckily, the Java Collections Framework makes this easy.

<p>

Suppose the old API returns an array of objects and the new
API requires a <code>Collection</code>. The Collections Framework
has a convenience implementation that allows an array of objects
to be viewed as a <code>List</code>. You use 

<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/Arrays.html#asList(T...)"><code>Arrays.asList</code></a> to pass an array to any method requiring a <code>Collection</code>
or a <code>List</code>.

<blockquote><pre>
Foo[] result = oldMethod(arg);
newMethod(Arrays.asList(result));
</pre></blockquote>

If the old API returns a <code>Vector</code> or a <code>Hashtable</code>,
you have no work to do at all because <code>Vector</code> was retrofitted
to implement the <code>List</code> interface, and <code>Hashtable</code>
was retrofitted to implement <code>Map</code>. Therefore, a <code>Vector</code>
may be passed directly to any method calling for a <code>Collection</code>
or a <code>List</code>.

<blockquote><pre>
Vector result = oldMethod(arg);
newMethod(result);
</pre></blockquote>

Similarly, a <code>Hashtable</code> may be passed directly to any method
calling for a <code>Map</code>.

<blockquote><pre>
Hashtable result = oldMethod(arg);
newMethod(result);
</pre></blockquote>

Less frequently, an API may return an <code>Enumeration</code>
that represents a collection of objects.  The <code>Collections.list</code>
method translates an <code>Enumeration</code> into a <code>Collection</code>.

<blockquote><pre>
Enumeration e = oldMethod(arg);
newMethod(Collections.list(e));
</pre></blockquote>

</blockquote>

<h3 fmstyle=D-Head>Backward Compatibility</h3>

<blockquote>

Suppose you're using an API that returns modern collections in
tandem with another API that requires you to pass in legacy collections.
To make the two APIs interoperate smoothly, you have to transform modern collections into old collections. Again, the Java Collections
Framework makes this easy. 

<p>

Suppose the new API returns a <code>Collection</code>,
and the old API requires an array of <code>Object</code>.
As you're probably aware, the <code>Collection</code> interface
contains a <code>toArray</code> method designed expressly for this situation.

<blockquote><pre>
Collection c = newMethod();
oldMethod(c.toArray());
</pre></blockquote>

What if the old API requires an array of <code>String</code>
(or another type) instead of an array of <code>Object</code>?
You just use the other form of <code>toArray</code> &mdash; the one that
takes an array on input.

<blockquote><pre>
Collection c = newMethod();
oldMethod((String[]) c.toArray(new String[0]));
</pre></blockquote>

If the old API requires a <code>Vector</code>, the standard collection
constructor comes in handy.

<blockquote><pre>
Collection c = newMethod();
oldMethod(new Vector(c));
</pre></blockquote>

The case where the old API requires a <code>Hashtable</code>
is handled analogously.

<blockquote><pre>
Map m = newMethod();
oldMethod(new Hashtable(m));
</pre></blockquote>

Finally, what do you do if the old API requires an <code>Enumeration</code>?
This case isn't common, but it does happen from time to time, and the

<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/Collections.html#enumeration(java.util.Collection)"><code>Collections.enumeration</code></a> method was provided to handle it. This is a static factory method that takes a <code>Collection</code> and returns an <code>Enumeration</code>
over the elements of the <code>Collection</code>.

<blockquote><pre>
Collection c = newMethod();
oldMethod(Collections.enumeration(c));
</pre></blockquote>
        </blockquote>
        <div class=NavBit>
            <a target=_top href=index.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=api-design.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Interoperability
        <br><b>Next page:</b> API Design
    </div>
    </body>
</html> 
