
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>The Set Interface (The Java&trade; Tutorials &gt; 
            Collections &gt; Interfaces)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Collections
        <br><b>Lesson:</b> Interfaces
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Interfaces</a></div>
<div class="linkAHEAD"><a href="collection.html">The Collection Interface</a></div>
<div class="nolinkAHEAD">The Set Interface</div>
<div class="linkAHEAD"><a href="list.html">The List Interface</a></div>
<div class="linkAHEAD"><a href="queue.html">The Queue Interface</a></div>
<div class="linkAHEAD"><a href="map.html">The Map Interface</a></div>
<div class="linkAHEAD"><a href="order.html">Object Ordering</a></div>
<div class="linkAHEAD"><a href="sorted-set.html">The SortedSet Interface</a></div>
<div class="linkAHEAD"><a href="sorted-map.html">The SortedMap Interface</a></div>
<div class="linkAHEAD"><a href="summary.html">Summary of Interfaces</a></div>
<div class="linkQUESTIONS"><a href="QandE/questions.html">Questions and Exercises</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Collections</a>
                &gt;
                <a href=index.html target=_top>Interfaces</a>
            </span>
            <div class=NavBit>
                <a target=_top href=collection.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=list.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>The Set Interface</div>
            <blockquote>
A

<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/Set.html"><CODE>Set</CODE></a> is a

<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/Collection.html"><CODE>Collection</CODE></a> that cannot contain duplicate elements. It models the mathematical set
abstraction.  The <code>Set</code> interface contains <i>only</I> methods
inherited from <code>Collection</code> and adds the restriction that
duplicate elements are prohibited. <code>Set</code> also adds a stronger
contract on the behavior of the <code>equals</code> and <code>hashCode</code>
operations, allowing <code>Set</code> instances to be compared meaningfully
even if their implementation types differ. Two <code>Set</code> instances are
equal if they contain the same elements.
<p>
The following is the <code>Set</code> interface.
<blockquote><pre>
public interface Set&lt;E&gt; extends Collection&lt;E&gt; {
    // Basic operations
    int size();
    boolean isEmpty();
    boolean contains(Object element);
    boolean add(E element);         //optional
    boolean remove(Object element); //optional
    Iterator&lt;E&gt; iterator();

    // Bulk operations
    boolean containsAll(Collection&lt;?&gt; c);
    boolean addAll(Collection&lt;? extends E&gt; c); //optional
    boolean removeAll(Collection&lt;?&gt; c);        //optional
    boolean retainAll(Collection&lt;?&gt; c);        //optional
    void clear();                              //optional

    // Array Operations
    Object[] toArray();
    &lt;T&gt; T[] toArray(T[] a);
}
</pre></blockquote>
The Java platform contains three general-purpose <code>Set</code> implementations:
<code>HashSet</code>, <code>TreeSet</code>, and <code>LinkedHashSet</code>.
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/HashSet.html"><code>HashSet</code></a>, which stores its elements in a hash table, is the best-performing
implementation; however it makes no guarantees concerning the order of iteration.
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/TreeSet.html"><code>TreeSet</code></a>, which stores its elements in a red-black tree,
orders its elements based on their values; it is substantially slower than
<code>HashSet</code>.
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/LinkedHashSet.html"><code>LinkedHashSet</code></a>, which is implemented as
a hash table with a linked list running through it, orders its elements based
on the order in which they were inserted into the set (insertion-order).
<code>LinkedHashSet</code> spares its clients from the unspecified, generally
chaotic ordering provided by <code>HashSet</code> at a cost that is only
slightly higher.

<p>
Here's a simple but useful <code>Set</code> idiom. Suppose you have a
<code>Collection</code>, <code>c</code>, and you want to create another
<code>Collection</code> containing the same elements but with all
duplicates eliminated. The following one-liner does the trick.

<blockquote><pre>
Collection&lt;Type&gt; noDups = new HashSet&lt;Type&gt;(c);
</pre></blockquote>
It works by creating a <code>Set</code> (which, by definition, cannot contain a
duplicate), initially containing all the elements in <code>c</code>.  It uses
the standard conversion constructor described in the
<a class="TutorialLink" target="_top" href="collection.html">The Collection Interface</a> section.

<P>
Here is a minor variant of this idiom that preserves the order of the original
collection while removing duplicate element.

<blockquote><pre>
Collection&lt;Type&gt; noDups = new LinkedHashSet&lt;Type&gt;(c);
</pre></blockquote>
</P>

<P>
The following is a generic method that encapsulates the preceding idiom, returning a <code>Set</code>
of the same generic type as the one passed.

<blockquote><pre>
public static &lt;E&gt; Set&lt;E&gt; removeDups(Collection&lt;E&gt; c) {
    return new LinkedHashSet&lt;E&gt;(c);
}
</pre></blockquote>
</blockquote>
<h3 fmstyle=C-Head>Set Interface Basic Operations</h3>

<blockquote>

The <code>size</code> operation returns the number of elements in the
<code>Set</code> (its <i>cardinality</i>).  The <code>isEmpty</code> method
does exactly what you think it would.  The <code>add</code> method adds the
specified element to the <code>Set</code> if it's not already present and
returns a boolean indicating whether the element was added.
Similarly, the <code>remove</code> method removes the specified element from
the <code>Set</code> if it's present and returns a boolean indicating whether
the element was present.  The <code>iterator</code> method returns an
<CODE>Iterator</CODE></a> over the <CODE>Set</CODE>.
<p>
The following
<a class="SourceLink" target="_blank" href="examples/FindDups.java"><code>program</code></a> takes the
words in its argument list and prints out any duplicate words, the number of
distinct words, and a list of the words with duplicates eliminated.

<blockquote><pre>
import java.util.*;

public class FindDups {
    public static void main(String[] args) {
        Set&lt;String&gt; s = new HashSet&lt;String&gt;();
        for (String a : args)
            if (!s.add(a))
                System.out.println(&quot;Duplicate detected: &quot; + a);

        System.out.println(s.size() + &quot; distinct words: &quot; + s);
    }
}
</pre></blockquote>

Now run the program.

<blockquote><pre>
java FindDups i came i saw i left
</pre></blockquote>

The following output is produced.

<blockquote><pre>
Duplicate detected: i
Duplicate detected: i
4 distinct words: [i, left, saw, came]
</pre></blockquote>

Note that the code always refers to the <code>Collection</code> by its interface
type (<code>Set</code>) rather than by its implementation type
(<code>HashSet</code>).  This is a <i>strongly</i> recommended programming
practice because it gives you the flexibility to change implementations merely by
changing the constructor.  If either of the variables used
to store a collection or the parameters used to pass it around are declared
to be of the <code>Collection</code>'s implementation type rather than its interface type, <i>all</i> such variables and parameters must be changed in order to change its implementation type.

<p>

Furthermore, there's no guarantee that the resulting program will work. If the program uses any nonstandard operations present in the original implementation type but not in the new one, the program will fail.  Referring to collections only by their interface prevents you from
using any nonstandard operations.

<p>

The implementation type of the <code>Set</code> in the preceding example is
<code>HashSet</code>, which makes no guarantees as to the order of the elements
in the <code>Set</code>.  If you want the program to print the word list in
alphabetical order, merely change the <code>Set</code>'s implementation
type from <code>HashSet</code> to <code>TreeSet</code>.  Making this trivial
one-line change causes the command line in the previous example to
generate the following output.

<blockquote><pre>
java FindDups i came i saw i left
Duplicate detected: i
Duplicate detected: i
4 distinct words: [came, i, left, saw]
</pre></blockquote>
</blockquote>

<h3 fmstyle=C-Head>Set Interface Bulk Operations</h3>
<blockquote>
Bulk operations are particularly well suited to <code>Set</code>s;
when applied, they perform standard set-algebraic operations.  Suppose
<code>s1</code> and <code>s2</code> are sets.  Here's what bulk
operations do:
<ul>
<li>
<code>s1.containsAll(s2)</code> &mdash; returns <code>true</code> if
<code>s2</code> is a <b>subset</b> of <code>s1</code>.
(<Code>s2</Code> is a subset
of <code>s1</code> if set <code>s1</code> contains all of the elements in
<code>s2</code>.)

<li>
<code>s1.addAll(s2)</code> &mdash; transforms <code>s1</code> into the
<b>union</b> of <code>s1</code> and <code>s2</code>.  (The union of two sets
is the set containing all of the elements contained in either set.)

<li>
<code>s1.retainAll(s2)</code> &mdash; transforms <code>s1</code> into the
intersection of <code>s1</code> and <code>s2</code>.  (The intersection
of two sets is the set containing only the elements common to both
sets.)

<li>
<code>s1.removeAll(s2)</code> &mdash; transforms <code>s1</code> into the
(asymmetric) set difference of <code>s1</code> and <code>s2</code>.
(For example, the set difference of <code>s1</code> minus <code>s2</code> is the set containing
all of the elements found in <code>s1</code> but not in <code>s2</code>.)
</ul>

To calculate the union, intersection, or set difference
of two sets <i>nondestructively</i> (without modifying either set),
the caller must copy one set before calling the appropriate bulk operation.
The following are the resulting idioms.

<blockquote><pre>
Set&lt;Type&gt; union = new HashSet&lt;Type&gt;(s1);
union.addAll(s2);

Set&lt;Type&gt; intersection = new HashSet&lt;Type&gt;(s1);
intersection.retainAll(s2);

Set&lt;Type&gt; difference = new HashSet&lt;Type&gt;(s1);
difference.removeAll(s2);
</pre></blockquote>

The implementation type of the result <code>Set</code> in the preceding
idioms is <code>HashSet</code>, which is, as already mentioned,
the best all-around <code>Set</code> implementation in the Java platform.
However, any general-purpose
<code>Set</code> implementation could be substituted.
<p>
Let's revisit the <code>FindDups</code> program.  Suppose you
want to know which words in the argument list occur only once and which
occur more than once, but you do not want any duplicates printed out
repeatedly.  This effect can be achieved by generating two sets &mdash;
one containing every word in the argument list and the other containing only
the duplicates.  The words that occur only once are the set
difference of these two sets, which we know how to compute.  Here's how

<a class="SourceLink" target="_blank" href="examples/FindDups2.java"><code>the resulting program</code></a> looks.
<blockquote><pre>
import java.util.*;

public class FindDups2 {
    public static void main(String[] args) {
        Set&lt;String&gt; uniques = new HashSet&lt;String&gt;();
        Set&lt;String&gt; dups    = new HashSet&lt;String&gt;();

        for (String a : args)
            if (!uniques.add(a))
                dups.add(a);

	// Destructive set-difference
        uniques.removeAll(dups);

        System.out.println(&quot;Unique words:    &quot; + uniques);
        System.out.println(&quot;Duplicate words: &quot; + dups);
    }
}
</pre></blockquote>

When run with the same argument list used earlier (<code>i came i saw i left</code>),
the program yields the following output.
<blockquote><pre>
Unique words:    [left, saw, came]
Duplicate words: [i]
</pre></blockquote>

A less common set-algebraic operation is the <i>symmetric set difference</i> &mdash; the set of elements contained in either of two specified sets but not in both.  The following code calculates the symmetric set difference of two
sets nondestructively.
<blockquote><pre>
Set&lt;Type&gt; symmetricDiff = new HashSet&lt;Type&gt;(s1);
symmetricDiff.addAll(s2);
Set&lt;Type&gt; tmp = new HashSet&lt;Type&gt;(s1);
tmp.retainAll(s2));
symmetricDiff.removeAll(tmp);
</pre></blockquote>
</blockquote>

<h3 fmstyle=C-Head>Set Interface Array Operations</h3>
<blockquote>
The array operations don't do anything special for <code>Set</code>s
beyond what they do for any other <code>Collection</code>.
These operations are described in
<a class="TutorialLink" target="_top" href="collection.html">The Collection Interface</a> section.

        </blockquote>
        <div class=NavBit>
            <a target=_top href=collection.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=list.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> The Collection Interface
        <br><b>Next page:</b> The List Interface
    </div>
    </body>
</html> 
