<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Understanding Extension Class Loading (The Java&trade; Tutorials &gt; 
            The Extension Mechanism &gt; Creating and Using Extensions)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> The Extension Mechanism
        <br><b>Lesson:</b> Creating and Using Extensions
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Creating and Using Extensions</a></div>
<div class="linkAHEAD"><a href="install.html">Installed Extensions</a></div>
<div class="linkAHEAD"><a href="download.html">Download Extensions</a></div>
<div class="nolinkAHEAD">Understanding Extension Class Loading</div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>The Extension Mechanism</a>
                &gt;
                <a href=index.html target=_top>Creating and Using Extensions</a>
            </span>
            <div class=NavBit>
                <a target=_top href=download.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=../security/index.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>Understanding Extension Class Loading</div>
            <blockquote>
The extension framework makes use of the class-loading delegation mechanism.
 
When the runtime environment needs to load a new class
for an application, it looks for the 
class in the following locations, in order:
<ol>

<li><b>Bootstrap classes</b>: the runtime classes in 
<tt>rt.jar</tt>, internationalization classes in <tt>i18n.jar</tt>,
and others.
</li>

<li><b>Installed extensions</b>: classes in JAR files in the 
<tt>lib/ext</tt> directory of the JRE,
and in the system-wide, platform-specific extension directory
(such as <tt>/usr/jdk/packages/lib/ext</tt>
on the Solaris<font size="-2"><sup>TM</sup></font> Operating System,
but note that use of this directory applies only to
Java<font size="-2"><sup>TM</sup></font> 6 and later).
</li>

<li><b>The class path</b>: classes,
including classes in JAR files, on paths specified by the 
system property <tt>java.class.path</tt>.  If a JAR file on the class path has
a manifest with the <code>Class-Path</code> attribute,
JAR files specified by the <code>Class-Path</code> attribute 
will be searched also.
By default, the <code>java.class.path</code> property's value 
is <code>.</code>, the current directory.

You can change the value by using the 
<tt>-classpath</tt> or <tt>-cp</tt> command-line options, or
setting the <code>CLASSPATH</code> environment variable.

The
command-line options override the setting of the <code>CLASSPATH</code> 
environment variable.
</li>

</ol>

<p>
The precedence list tells you, for example, that the class path is 
searched only if a class to be loaded hasn't been found among the 
classes in <tt>rt.jar</tt>, <tt>i18n.jar</tt> or the installed extensions. 
<p>
Unless your software instantiates its own class loaders for 
special purposes, you don't really need to know much more than to 
keep this precedence list in mind. In particular, you should be 
aware of any class name conflicts that might be present. For example, 
if you list a class on the class path, you'll get unexpected 
results if the runtime environment instead loads another class 
of the same name that it found in an installed extension.


</blockquote>
<h3>The Java Class Loading Mechanism</h3>
<blockquote>
The Java platform uses a delegation model for 
loading classes. The basic idea is that every class loader has a 
"parent" class loader.  When loading a class, a class loader first 
"delegates" the search for the class to its parent class loader before 
attempting to find the class itself. 
<p>
Here are some highlights of the class-loading API:
<ul>
<li>Constructors in <tt>java.lang.ClassLoader</tt> and its subclasses 
allow you to specify a parent when you instantiate a new class loader. 
If you don't explicitly specify a parent, the virtual machine's system 
class loader will be assigned as the default parent.
<li>The <tt>loadClass</tt> method in <tt>ClassLoader</tt> performs 
these tasks, in order, when called to load a class:
     	<ol>
	<li>If a class has already been loaded, it returns it.
	<li>Otherwise, it delegates the search for the new class 
	    to the parent class loader.
	<li>If the parent class loader does not find the class, 
	    <tt>loadClass</tt> calls the method <tt>findClass</tt> 
	    to find and load the class.
	</ol>
<li>The <tt>findClass</tt> method of <tt>ClassLoader</tt> searches 
for the class in the current class loader if the class wasn't found by 
the parent class loader. You will probably want to override this method 
when you instantiate a class loader subclass in your application.
<li>The class <tt>java.net.URLClassLoader</tt> 
serves as the basic class loader for extensions 
and other JAR files, overriding the <tt>findClass</tt> method of 
<tt>java.lang.ClassLoader</tt> to search one or more specified URLs for 
classes and resources.
</ul>
<p>
To see a sample application that uses some of the API as it  
relates to JAR files, see the
<a class="TutorialLink" target="_top" href="../../deployment/jar/apiindex.html">Using JAR-related APIs</a> lesson in this tutorial.
</blockquote>

<h3>Class Loading and the <tt>java</tt> Command</h3>
<blockquote>
The Java platform's class-loading mechanism 
is reflected in the <tt>java</tt> command. 
<ul>

<li>In the <tt>java</tt> tool, the 
<tt>-classpath</tt> option is a shorthand way to set the 
<tt>java.class.path</tt> property.
</li>

<li>The 
<tt>-cp</tt> and <tt>-classpath</tt> options are equivalent. 
</li>

<li>The <tt>-jar</tt> option runs applications 
that are packaged in JAR files. For a description and examples of 
this option, see the
<a class="TutorialLink" target="_top" href="../../deployment/jar/run.html">Running JAR-Packaged Software</a> lesson in this tutorial.
</ul>
        </blockquote>
        <div class=NavBit>
            <a target=_top href=download.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=../security/index.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Download Extensions
        <br><b>Next page:</b> Making Extensions Secure
    </div>
    </body>
</html> 
