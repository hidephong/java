<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Signing JAR Files (The Java&trade; Tutorials &gt; 
            Deployment &gt; Packaging Programs in JAR Files)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Deployment
        <br><b>Lesson:</b> Packaging Programs in JAR Files
        <br><b>Section:</b> Signing and Verifying JAR Files
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Packaging Programs in JAR Files</a></div>
<div class="linkAHEAD"><a href="basicsindex.html">Using JAR Files: The Basics</a></div>
<div class="linkBHEAD"><a href="build.html">Creating a JAR File</a></div>
<div class="linkBHEAD"><a href="view.html">Viewing the Contents of a JAR File</a></div>
<div class="linkBHEAD"><a href="unpack.html">Extracting the Contents of a JAR File</a></div>
<div class="linkBHEAD"><a href="update.html">Updating a JAR File</a></div>
<div class="linkBHEAD"><a href="run.html">Running JAR-Packaged Software</a></div>
<div class="linkAHEAD"><a href="manifestindex.html">Working with Manifest Files: The Basics</a></div>
<div class="linkBHEAD"><a href="defman.html">Understanding the Default Manifest</a></div>
<div class="linkBHEAD"><a href="modman.html">Modifying a Manifest File</a></div>
<div class="linkBHEAD"><a href="appman.html">Setting an Application's Entry Point</a></div>
<div class="linkBHEAD"><a href="downman.html">Adding Classes to the JAR File's Classpath</a></div>
<div class="linkBHEAD"><a href="packageman.html">Setting Package Version Information</a></div>
<div class="linkBHEAD"><a href="sealman.html">Sealing Packages within a JAR File</a></div>
<div class="linkAHEAD"><a href="signindex.html">Signing and Verifying JAR Files</a></div>
<div class="linkBHEAD"><a href="intro.html">Understanding Signing and Verification</a></div>
<div class="nolinkBHEAD">Signing JAR Files</div>
<div class="linkBHEAD"><a href="verify.html">Verifying Signed JAR Files</a></div>
<div class="linkAHEAD"><a href="apiindex.html">Using JAR-related APIs</a></div>
<div class="linkBHEAD"><a href="jarclassloader.html">The JarClassLoader Class</a></div>
<div class="linkBHEAD"><a href="jarrunner.html">The JarRunner Class</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Deployment</a>
                &gt;
                <a href=index.html target=_top>Packaging Programs in JAR Files</a>
            </span>
            <div class=NavBit>
                <a target=_top href=intro.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=verify.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>Signing JAR Files</div>
            <blockquote>
You use the JAR Signing and Verification Tool to sign JAR files. 

You invoke the JAR Signing and Verification Tool by using the <tt>jarsigner</tt> command, so we'll refer to it as "Jarsigner" for short.

<p>

To sign a JAR file, you must first have a private key. 
Private keys and their associated public-key certificates are stored 
in password-protected databases called <em>keystores</em>.  A keystore 
can hold the keys of many potential signers.   Each key in the 
keystore can be identified by an <em>alias</em> which is typically the name of the 
signer who owns the key.  The key belonging to Rita Jones might have the alias "rita", for example.

<p>

The basic form of the command for signing a JAR file is 

<blockquote><pre>
jarsigner <i>jar-file alias</i>
</pre></blockquote>

In this command:

<ul>

<li><tt>jar-file</tt> is the pathname of the JAR file that's to 
be signed. 

<li><tt>alias</tt> is the alias identifying the private key 
that's to be used to sign the JAR file, and the key's associated certificate.

</ul>

<p>

The Jarsigner tool will prompt you for the passwords for the keystore 
and alias.  

<p>

This basic form of the command assumes that the keystore to be used 
is in a file named <tt>.keystore</tt> in your home directory.  It 
will create signature and signature block files with names <tt>x.SF</tt> 
and <tt>x.DSA</tt> respectively, where <tt>x</tt> is the first eight 
letters of the alias, all converted to upper case. This basic command 
will <em>overwrite</em> the original JAR file with the signed JAR file. 

<p>

In practice, you may want to use this command in conjunction with 
one or more of these options, which must precede the <tt>jar-file</tt> 
pathname:
<br></br>
<table cellspacing=3 border=1>
<caption><strong> Jarsigner Command Options </strong></caption>
<tr><th>Option</th><th>Description</th></tr>
<tr><td><tt>-keystore</tt>&nbsp;<i>url</i></td><td>Specifies a keystore to 
be used if you don't want to use the <tt>.keystore</tt> default 
database.</td></tr>
<tr><td><tt>-storepass</tt>&nbsp;<i>password</i></td><td>Allows you to enter 
the keystore's password on the command line rather than be prompted for it.
</td></tr>
<tr><td><tt>-keypass</tt>&nbsp;<i>password</i></td><td>Allows you to enter your 
alias's password on the command line rather than be prompted for it.</td></tr>
<tr><td><tt>-sigfile</tt>&nbsp;<i>file</i></td><td>Specifies the base name for 
the .SF and .DSA files if you don't want the base name to be taken 
from your alias. <i>file</i> must be composed only of 
upper case letters (A-Z), numerals (0-9), hyphen (-), and underscore (_).</td></tr>
<tr><td><tt>-signedjar</tt>&nbsp;<i>file</i></td><td>Specifies the name of the 
signed JAR file to be generated if you don't want the original unsigned 
file to be overwritten with the signed file.</td></tr>
</table>

</blockquote>

<h3>Example</h3>
<blockquote>
Let's look at a couple of examples of signing a JAR file with the 
Jarsigner tool.  In these examples we will assume:
<ul>
<li>your alias is "johndoe".
<li>the keystore you want to use is in a file named "mykeys" in the current 
working directory.
<li>the keystore's password is "abc123".
<li>the password for your alias is "mypass".
</ul>

Under these assumptions, you could use this command to sign a JAR file named <tt>app.jar</tt>:
<blockquote><pre>
jarsigner -keystore mykeys -storepass abc123 
          -keypass mypass app.jar johndoe
</blockquote></pre>
<p>
Because this command doesn't make use of the <tt>-sigfile</tt> option, 
the .SF and .DSA files it creates would be named <tt>JOHNDOE.SF</tt> and 
<tt>JOHNDOE.DSA</tt>. Because the command doesn't use the <tt>-signedjar</tt> 
option, the resulting signed file will overwrite the original version 
of <tt>app.jar</tt>.
<p>
Let's look at what would happen if you used a different combination 
of options:
<blockquote><pre>
jarsigner -keystore mykeys -sigfile SIG 
          -signedjar SignedApp.jar app.jar johndoe
</pre></blockquote>
<p>
This time, you would be prompted to enter the passwords for both the 
keystore and your alias because the passwords aren't specified on the 
command line.  The signature and 
signature block files would be named <tt>SIG.SF</tt> and 
<tt>SIG.DSA</tt>, respectively, and the signed JAR file 
<tt>SignedApp.jar</tt> would be placed in the current directory. The 
original unsigned JAR file would remain unchanged.
</blockquote>

<h3>Additional Information</h3>
<blockquote>
Complete reference pages for the JAR Signing and Verification Tool are 
on-line:

<a class="OutsideLink" target="_blank" href="http://java.sun.com/javase/6/docs/technotes/guides/security/SecurityToolsSummary.html">Summary of Security Tools</a>

</blockquote>


        </blockquote>
        <div class=NavBit>
            <a target=_top href=intro.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=verify.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Understanding Signing and Verification
        <br><b>Next page:</b> Verifying Signed JAR Files
    </div>
    </body>
</html> 
