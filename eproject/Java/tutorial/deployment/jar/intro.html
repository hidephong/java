<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Understanding Signing and Verification (The Java&trade; Tutorials &gt; 
            Deployment &gt; Packaging Programs in JAR Files)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Deployment
        <br><b>Lesson:</b> Packaging Programs in JAR Files
        <br><b>Section:</b> Signing and Verifying JAR Files
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Packaging Programs in JAR Files</a></div>
<div class="linkAHEAD"><a href="basicsindex.html">Using JAR Files: The Basics</a></div>
<div class="linkBHEAD"><a href="build.html">Creating a JAR File</a></div>
<div class="linkBHEAD"><a href="view.html">Viewing the Contents of a JAR File</a></div>
<div class="linkBHEAD"><a href="unpack.html">Extracting the Contents of a JAR File</a></div>
<div class="linkBHEAD"><a href="update.html">Updating a JAR File</a></div>
<div class="linkBHEAD"><a href="run.html">Running JAR-Packaged Software</a></div>
<div class="linkAHEAD"><a href="manifestindex.html">Working with Manifest Files: The Basics</a></div>
<div class="linkBHEAD"><a href="defman.html">Understanding the Default Manifest</a></div>
<div class="linkBHEAD"><a href="modman.html">Modifying a Manifest File</a></div>
<div class="linkBHEAD"><a href="appman.html">Setting an Application's Entry Point</a></div>
<div class="linkBHEAD"><a href="downman.html">Adding Classes to the JAR File's Classpath</a></div>
<div class="linkBHEAD"><a href="packageman.html">Setting Package Version Information</a></div>
<div class="linkBHEAD"><a href="sealman.html">Sealing Packages within a JAR File</a></div>
<div class="linkAHEAD"><a href="signindex.html">Signing and Verifying JAR Files</a></div>
<div class="nolinkBHEAD">Understanding Signing and Verification</div>
<div class="linkBHEAD"><a href="signing.html">Signing JAR Files</a></div>
<div class="linkBHEAD"><a href="verify.html">Verifying Signed JAR Files</a></div>
<div class="linkAHEAD"><a href="apiindex.html">Using JAR-related APIs</a></div>
<div class="linkBHEAD"><a href="jarclassloader.html">The JarClassLoader Class</a></div>
<div class="linkBHEAD"><a href="jarrunner.html">The JarRunner Class</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Deployment</a>
                &gt;
                <a href=index.html target=_top>Packaging Programs in JAR Files</a>
            </span>
            <div class=NavBit>
                <a target=_top href=signindex.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=signing.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>Understanding Signing and Verification</div>
            <blockquote>
The Java<font size="-2"><sup>TM</sup></font> platform enables you 
to digitally sign JAR files.  

You digitally sign a file for the same reason you might sign a 
paper document with pen and ink -- to let readers  
know that you wrote the document, or at least that the document 
has your approval. 

<p>

When you sign a letter, for example, everyone who recognizes your 
signature can confirm that you wrote the letter.  
Similarly when you digitally sign a file, anyone who "recognizes" 
your digital signature knows that the file came from you.  
The process of "recognizing" electronic signatures 
is called <em>verification</em>.

<p>

The ability to sign and verify files is an important part of 
the Java platform's security architecture. Security is controlled by the security 
<em>policy</em> that's in force at runtime.  You can configure 
the policy to grant security privileges to applets and to 
applications.  

For example, you could grant permission to an applet to perform 
normally forbidden operations such as reading and writing local 
files or running local executable programs. If you have 
downloaded some code that's signed by a trusted entity, you can 
use that fact as a criterion in deciding which security permissions 
to assign to the code.

<p>

Once you (or your browser) have verified that an applet is from a 
trusted source, you can have the platform relax security restrictions 
to let the applet perform operations that would ordinarily be forbidden. 
A trusted applet can have freedoms as specified by the <em>policy file</em> in force.

<p>

The Java platform enables signing and verification by using 
special numbers called public and private <em>keys</em>.  Public 
keys and private keys come in pairs, and they play complementary 
roles. 

<p>
The private key is the electronic "pen" with which you 
can sign a file.  As its name implies, your private key is known 
only to you so that no one else can "forge" your signature.
A file signed with your private key can be verified only by 
the corresponding public key. 

<p>

Public and private keys alone, however, aren't enough to truly verify 
a signature.  Even if you've verified that a signed file contains a 
matching key pair, you still need some way to confirm that the public 
key actually comes from the signer that it purports to come from.

<p>

One more element, therefore, is required to make signing and verification 
work. That additional element is the <em>certificate</em> that the 
signer includes in a signed JAR file.  A certificate is a 
digitally signed statement from a recognized <em>certification authority</em> 
that indicates who owns a particular public key.  A certification 
authority are entities (typically firms specializing in digital 
security) that are trusted throughout the industry to sign and issue 
certificates for keys and their owners. In the case of 
signed JAR files, the certificate indicates who owns the public key 
contained in the JAR file.

<p>

When you sign a JAR file your public key is placed inside the archive 
along with an associated certificate so that it's easily 
available for use by anyone wanting to verify your signature.

<p>

To summarize digital signing:
<ul>
<li> The signer signs the JAR file using a private key.
<li> The corresponding public key is placed in the JAR file, together 
with its certificate, so that 
it is available for use by anyone who wants to verify the signature. 
</ul>


<a name="digest"></a>
</blockquote>
<h3>Digests and the Signature File</h3>

<blockquote>
When you sign a JAR file, each file in the archive is given a 
digest entry in the archive's <a href="manifestindex.html">manifest</a>. 
Here's an example of what such an entry might look like:

<blockquote><pre>
Name: test/classes/ClassOne.class
SHA1-Digest: TD1GZt8G11dXY2p4olSZPc5Rj64=
</pre></blockquote>

The digest values are hashes or encoded representations of the 
contents of the files as they were at the time of signing.  
A file's digest will change if and only if the file itself changes. 

<p>

When a JAR file is signed, a <em>signature</em> file is automatically 
generated and placed in the JAR file's <tt>META-INF</tt> directory, the same 
directory that contains the archive's manifest</a>. 
Signature files have filenames with an <tt>.SF</tt> extension. 

Here is an example of the contents of a signature file:

<blockquote><pre>
Signature-Version: 1.0
SHA1-Digest-Manifest: h1yS+K9T7DyHtZrtI+LxvgqaMYM=
Created-By: 1.6.0 (Sun Microsystems Inc.)

Name: test/classes/ClassOne.class
SHA1-Digest: fcav7ShIG6i86xPepmitOVo4vWY=

Name: test/classes/ClassTwo.class
SHA1-Digest: xrQem9snnPhLySDiZyclMlsFdtM=

Name: test/images/ImageOne.gif
SHA1-Digest: kdHbE7kL9ZHLgK7akHttYV4XIa0=

Name: test/images/ImageTwo.gif
SHA1-Digest: mF0D5zpk68R4oaxEqoS9Q7nhm60=
</pre></blockquote>

<p>

As you can see, the signature file contains digest entries for 
the archive's files that look similar to the digest-value entries 
in the manifest. However, while the digest values in the manifest 
are computed from the files themselves, the digest values in the signature 
file are computed from the corresponding entries in the manifest.
 
Signature files also contain a digest value for the entire manifest (see the 
<tt>SHA1-Digest-Manifest</tt> header in the above example).

<p>

When a signed JAR file is being verified, the digests of each of its 
files are re-computed and compared with the digests recorded in the 
manifest to ensure that the contents of the JAR file 
haven't changed since it was signed. As an additional check, digest 
values for the manifest file itself are re-computed and compared 
against the values recorded in the signature file.

<p>

You can read additional information about signature files on the 

<a class="OutsideLink" target="_blank" href="http://java.sun.com/javase/6/docs/technotes/guides/jar/jar.html#JAR%20Manifest">Manifest Format</a>  page of the JDK<font size="-2"><sup>TM</sup></font> documentation.</blockquote>

<h3>The Signature Block File</h3>

<blockquote>

In addition to the signature file, a <em>signature block</em> file 
is automatically placed in the <tt>META-INF</tt> directory when a JAR file 
is signed. Unlike the manifest file or the signature file, 
signature block files are not human-readable.

<p>

The signature block file contains two elements essential for 
verification:
<ul>
<li>The digital signature for the JAR file that was generated 
with the signer's private key
<li>The certificate containing the signer's public key, to be used 
by anyone wanting to verify the signed JAR file
</ul>
<p>
Signature block filenames typically will have a <tt>.DSA</tt> 
extension indicating that they were created by the default 
Digital Signature Algorithm. Other filename extensions 
are possible if keys associated with some other standard algorithm 
are used for signing.
</blockquote>



<hr>
<h3>Related Documentation</h3>
<blockquote>
For additional information about keys, certificates, and certification 
authorities, see 
<ul>
<li>
<a class="OutsideLink" target="_blank" href="http://java.sun.com/javase/6/docs/technotes/tools/index.html#security">The JDK Security Tools</a> <li>
<a class="OutsideLink" target="_blank" href="http://java.sun.com/javase/6/docs/technotes/guides/security/cert3.html">X.509 Certificates</a> </ul>
<p>
For more information about the Java platform's 
security architecture, see this related documentation:
<ul>
<li>
<a class="TutorialLink" target="_top" href="../../security/index.html">Security Features in Java SE</a>
<li>
<a class="OutsideLink" target="_blank" href="http://java.sun.com/products/jce/index.jsp">The Java Cryptography Extension web site</a> <li>
<a class="OutsideLink" target="_blank" href="http://java.sun.com/javase/6/docs/technotes/tools/index.html#security">JDK Security Documentation</a> </ul>



        </blockquote>
        <div class=NavBit>
            <a target=_top href=signindex.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=signing.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Signing and Verifying JAR Files
        <br><b>Next page:</b> Signing JAR Files
    </div>
    </body>
</html> 
