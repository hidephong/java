<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Sending Messages to Other Applets (The Java&trade; Tutorials &gt; 
            Deployment &gt; Applets)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Deployment
        <br><b>Lesson:</b> Applets
        <br><b>Section:</b> Taking Advantage of the Applet API
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Applets</a></div>
<div class="linkAHEAD"><a href="getStarted.html">Getting Started with Applets</a></div>
<div class="linkBHEAD"><a href="import.html">Importing Classes and Packages for Applets</a></div>
<div class="linkBHEAD"><a href="subclass.html">Defining an Applet Subclass</a></div>
<div class="linkBHEAD"><a href="lifeCycle.html">The Life Cycle of an Applet</a></div>
<div class="linkBHEAD"><a href="appletMethods.html">Methods for Milestones</a></div>
<div class="linkBHEAD"><a href="componentMethods.html">Methods for Drawing and Event Handling</a></div>
<div class="linkBHEAD"><a href="containerMethods.html">Methods for Adding UI Components</a></div>
<div class="linkBHEAD"><a href="security.html">What Applets Can and Can't Do</a></div>
<div class="linkAHEAD"><a href="appletsonlyindex.html">Taking Advantage of the Applet API</a></div>
<div class="linkBHEAD"><a href="data.html">Finding and Loading Data Files</a></div>
<div class="linkBHEAD"><a href="showStatus.html">Displaying Short Status Strings</a></div>
<div class="linkBHEAD"><a href="browser.html">Displaying Documents in the Browser</a></div>
<div class="nolinkBHEAD">Sending Messages to Other Applets</div>
<div class="linkBHEAD"><a href="sound.html">Playing Sounds</a></div>
<div class="linkBHEAD"><a href="param.html">Defining and Using Applet Parameters</a></div>
<div class="linkCHEAD"><a href="paramQs.html">Deciding Which Parameters to Support</a></div>
<div class="linkCHEAD"><a href="getParam.html">Writing the Code to Support Parameters</a></div>
<div class="linkCHEAD"><a href="paramInfo.html">Giving Information about Parameters</a></div>
<div class="linkBHEAD"><a href="html.html">Using the APPLET Tag	</a></div>
<div class="linkAHEAD"><a href="practicalindex.html">Practical Considerations When Writing Applets</a></div>
<div class="linkBHEAD"><a href="security_practical.html">Security Restrictions</a></div>
<div class="linkBHEAD"><a href="ui.html">Creating a User Interface</a></div>
<div class="linkCHEAD"><a href="gui.html">Creating a GUI</a></div>
<div class="linkCHEAD"><a href="stdout.html">Displaying Diagnostics to the Standard Output and Error Streams</a></div>
<div class="linkBHEAD"><a href="properties.html">Getting System Properties</a></div>
<div class="linkBHEAD"><a href="threads.html">Threads in Applets</a></div>
<div class="linkCHEAD"><a href="threadExample.html">Threads in Applets: Examples</a></div>
<div class="linkBHEAD"><a href="server.html">Working with a Server-Side Application </a></div>
<div class="linkCHEAD"><a href="clientExample.html">A Simple Network Client Applet</a></div>
<div class="linkCHEAD"><a href="workaround.html">Using a Server to Work Around Security Restrictions</a></div>
<div class="linkAHEAD"><a href="finishingindex.html">Finishing an Applet</a></div>
<div class="linkBHEAD"><a href="checklist.html">Before You Ship that Applet</a></div>
<div class="linkBHEAD"><a href="perfect.html">The Perfectly Finished Applet</a></div>
<div class="linkAHEAD"><a href="deployindex.html">Deploying Applets</a></div>
<div class="linkBHEAD"><a href="generaldeploy.html">General Deployment Considerations</a></div>
<div class="linkBHEAD"><a href="applettag.html">Using the applet Tag</a></div>
<div class="linkBHEAD"><a href="objecttag.html">Using the object Tag</a></div>
<div class="linkBHEAD"><a href="embedtag.html">Using the embed Tag</a></div>
<div class="linkBHEAD"><a href="mixedbrowser.html">Deploying Applets in a Mixed-Browser Environment</a></div>
<div class="linkAHEAD"><a href="problemsindex.html">Solving Common Applet Problems</a></div>
<div class="linkQUESTIONS"><a href="QandE/questions.html">Questions and Exercises</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Deployment</a>
                &gt;
                <a href=index.html target=_top>Applets</a>
            </span>
            <div class=NavBit>
                <a target=_top href=browser.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=sound.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>Sending Messages to Other Applets</div>
            <blockquote>
<!-- Sending Messages to Other Applets -->

<p>
Applets can find other applets and send messages to them, with the following security restrictions:
</p>
<ul>
<li> Many browsers require that the applets 
     originate from the same server.
<li> Many browsers further require that the applets 
     originate from the same directory on the server
     (the same code base).
<li> The Java API requires that the applets
     be running on the same page,
     in the same browser window.
</ul>


<blockquote><hr><strong>Note:</strong>&nbsp;
Some browsers let applets invoke methods on other applets &#151;
even applets on different pages in the same browser &#151;
as long as all of the applets come from the same code base.
This method of interapplet communication
isn't supported by the Java API,
so it's possible that it will not be supported by all browsers.
<hr></blockquote>

<p>
An applet can find another applet either by looking it up by name (using the <code>AppletContext getApplet</code> method) or by finding all the applets on the page (using the <code>AppletContext getApplets</code> method). Both methods, if successful, give the caller one or more <code>Applet</code> objects. Once the caller finds an <code>Applet</code> object, the caller can invoke methods on the object.
</p>

</blockquote>
<h3>Finding an Applet by Name: The getApplet Method</h3>
<blockquote>
<p>
The <code>getApplet</code> method looks through all of the applets on the current page to see if one of them has the specified name.
If so, <code>getApplet</code> returns the applet's <code>Applet</code> object.
</p>
<p>
By default, an applet has no name. For an applet to have a name,
one must be specified in the HTML code that adds the applet to a page.
You can specify an applet's name in two ways:
</p>
<ul>
<li> By specifying a <code>NAME</code> attribute within the applet's <code>&lt;APPLET&gt;</code> tag.
     For example:
<blockquote><pre>
&lt;APPLET CODEBASE=example/ CODE=Sender.class
    WIDTH=450
    HEIGHT=200
    <b>NAME="buddy"</b>&gt;
. . .
&lt;/APPLET&gt;
</pre></blockquote>

<li> By specifying a <code>NAME</code> parameter with a <code>&lt;PARAM&gt;</code> tag.
     For example:
<blockquote><pre>
&lt;APPLET CODEBASE=example/ CODE=Receiver.class
    WIDTH=450
    HEIGHT=50&gt;
<b>&lt;PARAM NAME="name" value="old pal"&gt;</b>
. . .
&lt;/APPLET&gt;
</pre></blockquote>
</ul>
<p>


<blockquote><hr><strong>Browser Note:</strong>&nbsp;
Although at least one browser enabled with Java technology
conducts a case-sensitive search,
the expected behavior is for the
<code>getApplet</code> method
to perform a case-<em>in</em>sensitive search.
For example, <code>getApplet("old pal")</code>
and <code>getApplet("OLD PAL")</code> should both find an
applet named "Old Pal".
<hr></blockquote>

<p>

Below are two applets that illustrate lookup by name. The first, the Sender, looks up the second, the Receiver. When the Sender finds the Receiver, the Sender sends a message to the Receiver by invoking one of the Receiver's methods (passing the Sender's name as an argument).
The Receiver reacts to this method call by changing its leftmost text string to "Received message from <em>sender-name</em>!".
</p>
<p>
<applet codebase=examples/ code=Sender.class archive=sender.jar width=450 height=200
 name="buddy">
<param name="receiverName" value="old pal">
</applet>

<br>
<br>

<applet codebase=examples/ code=Receiver.class archive=sender.jar width=450 height=50>
<param name="name" value="old pal">

<center><p><IMG SRC="../../figures/deployment/applet/11getap.png" WIDTH="398" HEIGHT="148" ALIGN="BOTTOM" ALT="Sample output"></p><p class="FigureCaption"><center><strong> Sample Output </strong></center></p></center></applet>


<blockquote><hr><strong>Note:</strong> If you don't see the applet running above, you need to install Java Plug-in, which happens automatically when you <a href="http://java.sun.com/javase/downloads" target="_blank">install the Java(TM) SE JRE or JDK</a>. This applet requires JDK 1.4 or later. You can find more information on the <a href="http://java.sun.com/products/plugin" target="_blank">Java Plug-in home page.</a><hr></blockquote>
<blockquote><hr><strong>Try this:</strong>&nbsp;
Click the <b>Send message</b> button of the top applet (the Sender).
Some status information will appear in the Sender's window,
and the Receiver will confirm (with its own status string)
that it received a message,
After you've read the Receiver status string,
press the Receiver's <b>Clear</b> button 
to reset the Receiver.
In the Sender's text field labeled "Receiver name:,"
type in <b><code>buddy</code></b> and press Return.
Since "buddy" is the Sender's own name,
the Sender will find an applet named buddy
but won't send it a message,
since it isn't a Receiver instance.
<hr></blockquote>

<p>

Here's the 

<a class="SourceLink" target="_blank" href="examples/Sender.java"><code>whole Sender program</code></a>.
The code it uses to look up 
and communicate with the Receiver
is listed below.
Code that you can use without change
in your own applet
is in <b>bold font</b>.

<blockquote><pre>
<b>Applet receiver = null;</b>
String receiverName = nameField.getText(); //Get name to search for.
<b>receiver = getAppletContext().getApplet(receiverName);</b>
</pre></blockquote>

The Sender goes on to make sure 
that the Receiver was found
and that it's an instance of the correct class (<code>Receiver</code>).
If all goes well, 
the Sender sends a message to the Receiver.
(Here's the 

<a class="SourceLink" target="_blank" href="examples/Receiver.java"><code>Receiver program</code></a>.)
<blockquote><pre>
<b>if (receiver != null) {</b>
    //Use the instanceof operator to make sure the applet
    //we found is a Receiver object.
    <b>if (!(receiver instanceof Receiver)) {</b>
        status.appendText("Found applet named "
                          + receiverName + ", "
                          + "but it's not a Receiver object.\n");
    <b>} else {</b>
        status.appendText("Found applet named "
                          + receiverName + ".\n"
                          + "  Sending message to it.\n");
        //Cast the receiver to be a Receiver object
        //(instead of just an Applet object) so that the
        //compiler will let us call a Receiver method.
        <b>((Receiver)receiver).</b>processRequestFrom(myName);
    <b>}
}</b> . . .
</pre></blockquote>
<p>

From an applet's point of view,
its name is stored in a parameter named <code>NAME</code>.
It can get the value of the parameter
using the <code>Applet getParameter</code> method.
For example, Sender gets its own name with the following code:
<blockquote><pre>
myName = getParameter("NAME");
</pre></blockquote>
<p>

For more information on using <code>getParameter</code>, see 

<a class="TutorialLink" target="_top" href="getParam.html">Writing the Code to Support Parameters</a>.


<p>

The example applets in this page perform one-way communication &#151;
from the Sender to the Receiver.
If you want your receiver to be able to send messages to the sender,
then you just need to have the sender give a reference to itself
(<code>this</code>) to the receiver.
For example:
<blockquote><pre>
((Receiver)receiver).startCommunicating(this);
</pre></blockquote>


</blockquote>
<h3>Finding All the Applets on a Page: The getApplets Method</h3>
<blockquote>
<p>
The <code>getApplets</code> method returns a list (an 
<a class="APILink" target="_blank" href="http://java.sun.com/javase/6/docs/api/java/util/Enumeration.html"><code>Enumeration</code></a>, to be precise) of all the applets on the page. For security reasons, many browsers and applet viewers implement <code>getApplets</code> so that it returns only those applets that originated from the same host as the applet calling <code>getApplets</code>. Here's an applet that simply lists all the applets it can find on this page:

<p>

<applet codebase=examples/ code=GetApplets.class archive=getApplets.jar width=400 height=150>
<center><p><IMG SRC="../../figures/deployment/applet/GetApplets.png" WIDTH="398" HEIGHT="148" ALIGN="BOTTOM" ALT="Sample output"></p><p class="FigureCaption"><center><strong> Sample Output </strong></center></p></center></applet>

<blockquote><hr><strong>Note:</strong> If you don't see the applet running above, you need to install Java Plug-in, which happens automatically when you <a href="http://java.sun.com/javase/downloads" target="_blank">install the Java(TM) SE JRE or JDK</a>. This applet requires JDK 1.4 or later. You can find more information on the <a href="http://java.sun.com/products/plugin" target="_blank">Java Plug-in home page.</a><hr></blockquote>
<p>

Below are the relevant parts
of the method that calls <code>getApplets</code>.
(Here's the 

<a class="SourceLink" target="_blank" href="examples/GetApplets.java"><code>whole program</code></a>.)
<blockquote><pre>
public void printApplets() {
    //Enumeration will contain all applets on this page (including
    //this one) that we can send messages to.
    Enumeration e = getAppletContext().getApplets();
    . . .
    while (e.hasMoreElements()) {
        Applet applet = (Applet)e.nextElement();
        String info = ((Applet)applet).getAppletInfo();
        if (info != null) {
            textArea.appendText("- " + info + "\n");
        } else {
            textArea.appendText("- "
                                + applet.getClass().getName()
                                + "\n");
        } 
    }
    . . . 
}
</pre></blockquote>


        </blockquote>
        <div class=NavBit>
            <a target=_top href=browser.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=sound.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Displaying Documents in the Browser
        <br><b>Next page:</b> Playing Sounds
    </div>
    </body>
</html> 
