<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>See the Policy File Effects (The Java&trade; Tutorials &gt; 
            Security Features in Java SE &gt; Quick Tour of Controlling Applications)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Security Features in Java SE
        <br><b>Lesson:</b> Quick Tour of Controlling Applications
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Quick Tour of Controlling Applications</a></div>
<div class="linkAHEAD"><a href="step1.html">Observe Application Freedom</a></div>
<div class="linkAHEAD"><a href="step2.html">See How to Restrict Applications</a></div>
<div class="linkAHEAD"><a href="step3.html">Set up the Policy File to Grant the Required Permissions</a></div>
<div class="linkBHEAD"><a href="wstep1.html">Open the Policy File</a></div>
<div class="linkBHEAD"><a href="wstep2.html">Grant the Required Permissions</a></div>
<div class="linkBHEAD"><a href="wstep3.html">Save the Policy File</a></div>
<div class="nolinkAHEAD">See the Policy File Effects</div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Security Features in Java SE</a>
                &gt;
                <a href=index.html target=_top>Quick Tour of Controlling Applications</a>
            </span>
            <div class=NavBit>
                <a target=_top href=wstep3.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=../sigcert/index.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>See the Policy File Effects</div>
            <blockquote>
Now that you have added the required policy entry to
the <code>mypolicy</code> policy file, 
you should be able to read the specified properties
when you execute the <code>GetProps</code> application with 
a security manager, as shown in the following figure.

<p><center><IMG SRC="../../figures/security/step6.gif" WIDTH="352" HEIGHT="153" ALIGN="BOTTOM" ALT=""></center></p>
<p>As noted at the end of the

<a class="TutorialLink" target="_top" href="../tour1/index.html">Quick Tour of Controlling Applets</a>
lesson, whenever you run an unsigned applet, or an application with a security manager, 
the policy files that are loaded and used by default are the ones 
specified in the <b>"security properties file"</b>,
which is located at

<pre>
  <b>Windows</b>:
    <i>java.home</i>\lib\security\java.security 
  <b>UNIX</b>:
    <i>java.home</i>/lib/security/java.security
</pre>

<b>Note:</b>&nbsp;&nbsp; <i>java.home</i> indicates the directory into which the JRE was installed.

<p>There are two possible ways you can have the 
<code>mypolicy</code> file
be considered as part of the overall policy, in addition to the policy files specified in
the security properties file. You can either specify the additional policy file in a 
property passed to the runtime system, as described in 
<a href = "#Approach1">Approach 1</a>,
or add a line in the security properties 
file specifying the additional policy file, as discussed in
<a href = "#Approach2">Approach 2</a>.

</blockquote>
<h3><a name="Approach1">Approach 1</a></h3>

<blockquote>

You can use a <code>-Djava.security.policy</code> interpreter
command line argument to specify a
policy file that should be used in addition to the ones
specified in the security properties file.

<p>Make sure that you are in the directory containing <code>GetProps.class</code> 
and <code>mypolicy</code>. Then you can
run the <code>GetProps</code> application and pass the
<code>mypolicy</code> policy file to the 
interpreter by typing the following command on one line:

<blockquote><pre>
<b>java -Djava.security.manager
     -Djava.security.policy=mypolicy GetProps</b>
</pre></blockquote>

<b>Note:&nbsp;&nbsp;</b> Remember that  <code>-Djava.security.manager</code> is
required in order to run an application with a security manager,
as shown in the <a href = "step2.html">See How to Restrict Applications</a>&nbsp;
step.

<p>The program reports the values of the <code>"user.home"</code> and
<code>"java.home"</code> properties.

<p>If the application still reports an error, 
something is wrong in the policy file.
Use the Policy Tool to check the policy entry you just created in the
<a href = "step3.html">Set up the Policy File to Grant the Required Permissions</a>&nbsp;
step.

</blockquote>


<h3><a name="Approach2">Approach 2</a></h3>

<blockquote>

You can specify a number of URLs 
in <code>policy.url.n</code> properties in the security properties file, and 
all the designated policy files will get loaded. 
So one way to have your <code>mypolicy</code> file's policy entries considered by the
<code>java</code> interpreter is to add 
an entry specifying that policy file in the security properties file.

<p>You created such an entry in the last part of the 

<a class="TutorialLink" target="_top" href="../tour1/index.html">Quick Tour of Controlling Applets</a>
lesson. If your security properties file still has that entry, 
you're ready to run the application. Otherwise you need
to add the entry. To do so, open the security properties file
in an editor suitable for editing an 
ASCII text file. Then add the following line after the line
containing <code>policy.url.2</code>:

<blockquote>

If you're on a Windows system, add

<blockquote><pre>
<b>policy.url.3=file:/C:/Test/mypolicy</b>
</pre></blockquote>

<p>If you're on a UNIX system, add

<blockquote><pre>
<b>policy.url.3=file:${user.home}/test/mypolicy</b>
</pre></blockquote>

On a UNIX system you can alternatively explicitly specify your home directory, as in

<blockquote><pre>
<b>policy.url.3=file:/home/susanj/test/mypolicy</b>
</pre></blockquote>


</blockquote>
</blockquote>
<h3><a name="Run">Run the Application</a></h3>
<blockquote>



Now you should be able to successfully run the following.

<blockquote><pre>
<b>java -Djava.security.manager GetProps</b>
</pre></blockquote>

<p>As with approach 1, if you still get a security exception, 
something is wrong in the policy file.
Use the Policy Tool to check the policy entry you just created in the
<a href = "step3.html">Set up the Policy File to Grant the Required Permissions</a>&nbsp;
step. Then fix any typos or other errors.

<hr>
<b>Important:</b> You do not need to include the <code>mypolicy</code> file unless you are running this Tutorial lesson.  To exclude this file, open the security properties file and delete the line you just added. 



<p>Before continuing, you may want to delete the line you just 
added in the security properties file (or comment it out)</b>, since you probably
do not want the <code>mypolicy</code> file included when you are not running 
the tutorial
lessons. 
<hr></blockquote>

</blockquote>





        </blockquote>
        <div class=NavBit>
            <a target=_top href=wstep3.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=../sigcert/index.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Save the Policy File
        <br><b>Next page:</b> API and Tools Use for Secure Code and File Exchanges
    </div>
    </body>
</html> 
