<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
    <head>
        <title>Import the Certificate as a Trusted Certificate (The Java&trade; Tutorials &gt; 
            Security Features in Java SE &gt; Signing Code and Granting It Permissions)
</title>
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #E76F00;
        font-family: sans-serif; 
        font-weight: bold;
        font-size: 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;
        font-size: smaller;
        font-family: sans-serif; 
    }
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #E76F00;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h3, h4, h5 {
        color: #E76F00;
        font-family: sans-serif;
    }
    #ToggleLeft {
        display: none;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Security Features in Java SE
        <br><b>Lesson:</b> Signing Code and Granting It Permissions
        <br><b>Section:</b> Steps for the Code Receiver
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Signing Code and Granting It Permissions</a></div>
<div class="linkAHEAD"><a href="signer.html">Steps for the Code Signer</a></div>
<div class="linkBHEAD"><a href="step1.html">Download and Try the Sample Application</a></div>
<div class="linkBHEAD"><a href="step2.html">Create a JAR File Containing the Class File</a></div>
<div class="linkBHEAD"><a href="step3.html">Generate Keys</a></div>
<div class="linkBHEAD"><a href="step4.html">Sign the JAR File</a></div>
<div class="linkBHEAD"><a href="step5.html">Export the Public Key Certificate</a></div>
<div class="linkAHEAD"><a href="receiver.html">Steps for the Code Receiver</a></div>
<div class="linkBHEAD"><a href="rstep1.html">Observe the Restricted Application</a></div>
<div class="nolinkBHEAD">Import the Certificate as a Trusted Certificate</div>
<div class="linkBHEAD"><a href="rstep3.html">Set Up a Policy File to Grant the Required Permission</a></div>
<div class="linkCHEAD"><a href="wstep1.html">Start Policy Tool</a></div>
<div class="linkCHEAD"><a href="wstep2.html">Specify the Keystore</a></div>
<div class="linkCHEAD"><a href="wstep3.html">Add a Policy Entry with a SignedBy Alias</a></div>
<div class="linkCHEAD"><a href="wstep4.html">Save the Policy File</a></div>
<div class="linkBHEAD"><a href="rstep4.html">See the Policy File Effects</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Security Features in Java SE</a>
                &gt;
                <a href=index.html target=_top>Signing Code and Granting It Permissions</a>
            </span>
            <div class=NavBit>
                <a target=_top href=rstep1.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=rstep3.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle>Import the Certificate as a Trusted Certificate</div>
            <blockquote>
Before you can grant the signed code permission to read a specified
file, you need to import Susan's certificate as a trusted certificate
in your keystore. 

<p>Suppose that you have received
from Susan

<ul>
<li>the signed JAR file <code>sCount.jar</code>, which
contains the <code>Count.class</code> file, and <p>
<li>the file <code>SusanJones.cer</code>, which
contains the public key certificate for the public key corresponding
to the private key used to sign the JAR file.
</ul>

<p>Even though you created these files and they haven't
actually been transported anywhere, you can simulate 
being someone other than the creater and sender, Susan.
Pretend that you are now Ray.
Acting as Ray, you will create a keystore named
<code>raystore</code> and will use it to import the certificate
into an entry with an alias of <code>susan</code>.

<p>A keystore is created whenever you use a <code>keytool</code> 
command specifying a keystore that doesn't yet exist.
Thus we can create the <code>raystore</code> and import the 
certificate via a single <code>keytool</code> command. Do the following
in your command window.

<ol>
<li>Go to the directory containing the 
public key certificate file <code>SusanJones.cer</code>. (You should
actually already be there, since this lesson assumes that you stay
in a single directory throughout.)<p>

<li>Type the following command on one line:

<blockquote><pre>
<b>keytool -import -alias susan
   -file SusanJones.cer -keystore raystore</b>
</pre></blockquote>

</ol>

Since the keystore doesn't yet exist, it will be created, and you will
be prompted for a keystore password; type whatever password you want.

<p>The <code>keytool</code> command will print out the certificate information 
and ask you to verify it, for example, by comparing the displayed certificate
fingerprints with those obtained from another (trusted) 
source of information. (Each fingerprint is a relatively short number 
that uniquely and 
reliably identifies the certificate.) For example, in the real world you might
call up Susan and ask her what the fingerprints should be. She can get the
fingerprints of the <code>SusanJones.cer</code> file she created by 
executing the command

<blockquote><pre>
<b>keytool -printcert -file SusanJones.cer</b>
</pre></blockquote>

If the fingerprints she sees are the same as the ones reported to you by
<code>keytool</code>, the certificate has not been modified
in transit. In that case you let <code>keytool</code> proceed with placing  
a trusted certificate entry in the keystore. 
The entry contains the public key certificate 
data from the file <code>SusanJones.cer</code> and is assigned the alias
<code>susan</code>.


        </blockquote>
        <div class=NavBit>
            <a target=_top href=rstep1.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=rstep3.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer>
<div id=TagNotes>
    Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://developer.sun.com/contact/tutorial_feedback.jsp">Give
    us your feedback</a>.
<br><br>
    <a target="_blank" href="../../information/copyright.html">Copyright</a>
    1995-2007 Sun Microsystems, Inc.  All rights reserved.
    <span id=Download>
</span></div> 

    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Observe the Restricted Application
        <br><b>Next page:</b> Set Up a Policy File to Grant the Required Permission
    </div>
    </body>
</html> 
